<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>AstroFood v19 â€“ Premium Gold + Chef-AI</title>

  <!-- Police arabe -->
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600&display=swap" rel="stylesheet">

  <style>
    :root {
      --gold: #FBBF24;
      --bg: radial-gradient(circle at top, #0f172a, #020617 65%);
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      background: var(--bg);
      color: #fff;
      font-family: system-ui, -apple-system, "Segoe UI", sans-serif;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }
    header {
      padding: 1rem 1.5rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: rgba(2,6,23,.22);
      border-bottom: 1px solid rgba(251,191,36,.25);
      position: sticky;
      top: 0;
      z-index: 50;
    }
    .branding {
      display: flex;
      align-items: center;
      gap: .75rem;
    }
    .logo {
      width: 44px;
      height: 44px;
      background: rgba(251,191,36,.08);
      border: 1px solid rgba(251,191,36,.4);
      border-radius: .9rem;
      display: grid;
      place-items: center;
      font-weight: 700;
      color: var(--gold);
      font-size: .8rem;
    }
    .langs {
      display: flex;
      gap: .5rem;
    }
    .lang-btn {
      background: transparent;
      border: 1px solid transparent;
      color: #fff;
      cursor: pointer;
      padding: .35rem .7rem;
      border-radius: .5rem;
      font-size: .85rem;
    }
    .lang-btn.active {
      border-color: rgba(251,191,36,.6);
      background: rgba(251,191,36,.1);
      color: var(--gold);
    }
    main {
      width: min(1100px, 100%);
      margin: 1.5rem auto 4.5rem;
      padding: 0 1rem 4rem;
    }
    .hero {
      display: grid;
      gap: 1.2rem;
      grid-template-columns: 1.1fr .9fr;
      align-items: center;
    }
    .hero-title {
      font-size: clamp(1.7rem, 3vw, 2.4rem);
      font-weight: 700;
      line-height: 1.05;
    }
    .hero-sub {
      color: rgba(255,255,255,.6);
      margin-top: .5rem;
    }
    .hero-cta {
      margin-top: 1rem;
      display: flex;
      gap: .8rem;
      flex-wrap: wrap;
    }
    .btn-gold {
      background: #FBBF24;
      border: none;
      color: #020617;
      padding: .6rem 1.1rem;
      border-radius: .55rem;
      font-weight: 600;
      cursor: pointer;
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      gap: .35rem;
    }
    .qr-block {
      background: rgba(2,6,23,.4);
      border: 1px solid rgba(251,191,36,.2);
      border-radius: 1rem;
      padding: 1rem;
      text-align: center;
    }
    .qr {
      width: 125px;
      height: 125px;
      background: #fff;
      margin: .5rem auto;
      border-radius: .75rem;
      overflow: hidden;
    }
    .qr-legend {
      font-size: .7rem;
      color: var(--gold);
      margin-top: .4rem;
      font-weight: 500;
      letter-spacing: .08em;
      font-family: 'Cairo',sans-serif;
    }
    /* Bloc AI principal */
    #astrofood-ai {
      background: rgba(15,23,42,.35);
      border:1px solid rgba(251,191,36,.35);
      border-radius:1rem;
      padding:1.5rem;
      margin-top:2rem;
    }
    select, input {
      background:#020617;
      color:#fff;
      padding:.5rem 1rem;
      border:1px solid rgba(251,191,36,.4);
      border-radius:.5rem;
    }
    /* carte rapide */
    #recipe-card-content {
      background: rgba(15,23,42,.35);
      border:1px solid rgba(251,191,36,.25);
      border-radius:1rem;
      padding:1.2rem 1.1rem;
      margin-top: 1rem;
    }
    /* carte Ã©ducative dÃ©taillÃ©e */
    #recipe-edu-display {
      display: none;
      margin-top: 1.4rem;
      gap: 1rem;
    }
    .card {
      background: rgba(15,23,42,.35);
      border: 1px solid rgba(251,191,36,.18);
      border-radius: 1rem;
      padding: 1rem;
    }
    /* chatbot flottant */
    .ai-bubble {
      position: fixed;
      right: 1.2rem;
      bottom: 1.2rem;
      background: rgba(2,6,23,.7);
      border: 1px solid rgba(251,191,36,.45);
      border-radius: 1.2rem;
      width: 320px;
      max-height: 410px;
      display: flex;
      flex-direction: column;
      overflow: hidden;
      backdrop-filter: blur(12px);
      font-size: .85rem;
    }
    .ai-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: .65rem .9rem;
      background: rgba(251,191,36,.08);
    }
    .ai-messages {
      padding: .75rem;
      gap: .5rem;
      display: flex;
      flex-direction: column;
      overflow-y: auto;
      flex: 1;
    }
    .ai-msg {
      background: rgba(15,23,42,.35);
      border:1px solid rgba(251,191,36,.12);
      border-radius: .7rem;
      padding: .5rem .7rem;
    }
    .ai-input {
      display: flex;
      gap: .4rem;
      padding: .6rem;
      border-top: 1px solid rgba(251,191,36,.1);
      background: rgba(2,6,23,.4);
    }
    .ai-input input {
      flex: 1;
    }
    .hidden { display: none; }

    @media (max-width: 880px) {
      .hero { grid-template-columns: 1fr; }
      .ai-bubble { width: min(96vw, 340px); }
    }
  </style>
</head>
<body>

<header>
  <div class="branding">
    <div class="logo">AF</div>
    <div>
      <div style="font-weight:600;">AstroFood Premium Gold</div>
      <div style="font-size:.7rem; color:rgba(255,255,255,.6);">Votre recette selon les Ã©toiles</div>
    </div>
  </div>
  <div class="langs">
    <button class="lang-btn active" data-lang="french">FR</button>
    <button class="lang-btn" data-lang="english">EN</button>
    <button class="lang-btn" data-lang="arabic">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</button>
  </div>
</header>

<main>
  <!-- HERO -->
  <section class="hero">
    <div>
      <h1 class="hero-title" data-i18n-fr="Cuisine guidÃ©e par les astres"
                           data-i18n-en="Cooking guided by the stars"
                           data-i18n-ar="Ø·Ø¹Ø§Ù…Ùƒ ÙˆÙÙ‚ Ø­Ø±ÙƒØ© Ø§Ù„ÙƒÙˆØ§ÙƒØ¨">Cuisine guidÃ©e par les astres</h1>
      <p class="hero-sub" data-i18n-fr="Choisis ton signe, ton Ã©tat. Lâ€™AI te propose 3 repas favorables + boissons + carte Ã©ducative."
                         data-i18n-en="Pick your sign and state. AI suggests 3 meals + drinks + educational card."
                         data-i18n-ar="Ø§Ø®ØªØ± Ø¨Ø±Ø¬Ùƒ ÙˆØ­Ø§Ù„ØªÙƒØŒ ÙˆØ§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ ÙŠÙ‚ØªØ±Ø­ 3 ÙˆØ¬Ø¨Ø§Øª + Ù…Ø´Ø±ÙˆØ¨Ø§Øª + Ø¨Ø·Ø§Ù‚Ø© ØªØ¹Ù„ÙŠÙ…ÙŠØ©.">
        Choisis ton signe, ton Ã©tat. Lâ€™AI te propose 3 repas favorables + boissons + carte Ã©ducative.
      </p>
      <div class="hero-cta">
        <a class="btn-gold" href="https://astrofoody.lemonsqueezy.com" target="_blank" rel="noopener">
          ğŸ›’ Unlock full pack
        </a>
        <button class="btn-gold" style="background:transparent;border:1px solid rgba(251,191,36,.3);color:#fff;" onclick="openChat()">Parler au Chef-AI</button>
      </div>
    </div>
    <div class="qr-block">
      <div class="qr">
        <!-- QR FIXE EXCEPTION -->
        <img src="https://api.qrserver.com/v1/create-qr-code/?size=125x125&data=https://astrofoody.lemonsqueezy.com"
             alt="QR AstroFood" width="125" height="125" style="border-radius:.5rem;" />
      </div>
      <div class="qr-legend">SCANNEZ POUR LA CARTE ASTROFOOD</div>
      <p style="font-size:.7rem; margin-top:.8rem;">Version Premium Gold v19 â€“ ne pas modifier la position du QR & de la lÃ©gende.</p>
    </div>
  </section>

  <!-- SECTION AI PRINCIPALE -->
  <section id="astrofood-ai">
    <h2 style="color:#FBBF24; margin-bottom:1rem;" data-i18n-fr="Assistant Chef-AI AstroFood"
                                                   data-i18n-en="AstroFood Chef-AI Assistant"
                                                   data-i18n-ar="Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø´ÙŠÙ Ø§Ù„ÙÙ„ÙƒÙŠ Ø£Ø³ØªØ±ÙˆÙÙˆØ¯">
      Assistant Chef-AI AstroFood
    </h2>
    <p style="margin-bottom:1rem;" data-i18n-fr="Je dÃ©tecte ton signe, ton Ã©nergie, et je te donne 3 repas (petit-dÃ©j, dÃ©jeuner, dÃ®ner) + 2 boissons universelles + carte Ã©ducative Ã  afficher."
                                    data-i18n-en="I detect your sign and energy and give 3 meals (breakfast, lunch, dinner) + 2 universal drinks + educational card."
                                    data-i18n-ar="Ø£ØªØ¹Ø±Ù Ø¹Ù„Ù‰ Ø¨Ø±Ø¬Ùƒ ÙˆØ­Ø§Ù„ØªÙƒ ÙˆØ£Ø¹Ø·ÙŠÙƒ 3 ÙˆØ¬Ø¨Ø§Øª (ÙØ·ÙˆØ±ØŒ ØºØ¯Ø§Ø¡ØŒ Ø¹Ø´Ø§Ø¡) + Ù…Ø´Ø±ÙˆØ¨ÙŠÙ† Ø¹Ø§Ù„Ù…ÙŠÙŠÙ† + Ø¨Ø·Ø§Ù‚Ø© ØªØ¹Ù„ÙŠÙ…ÙŠØ©.">
      Je dÃ©tecte ton signe, ton Ã©nergie, et je te donne 3 repas (petit-dÃ©j, dÃ©jeuner, dÃ®ner) + 2 boissons universelles + carte Ã©ducative Ã  afficher.
    </p>

    <div style="display:flex; gap:1rem; flex-wrap:wrap;">
      <div style="flex:1 1 240px;">
        <label style="display:block; margin-bottom:.5rem;" data-i18n-fr="Ton signe"
                                                           data-i18n-en="Your sign"
                                                           data-i18n-ar="Ø¨Ø±Ø¬Ùƒ">Ton signe</label>
        <select id="zodiac-select">
          <option value="aries">â™ˆ BÃ©lier</option>
          <option value="taurus">â™‰ Taureau</option>
          <option value="gemini">â™Š GÃ©meaux</option>
          <option value="cancer">â™‹ Cancer</option>
          <option value="leo">â™Œ Lion</option>
          <option value="virgo">â™ Vierge</option>
          <option value="libra">â™ Balance</option>
          <option value="scorpio">â™ Scorpion</option>
          <option value="sagittarius">â™ Sagittaire</option>
          <option value="capricorn">â™‘ Capricorne</option>
          <option value="aquarius">â™’ Verseau</option>
          <option value="pisces">â™“ Poissons</option>
        </select>
      </div>
      <div style="flex:1 1 240px;">
        <label style="display:block; margin-bottom:.5rem;" data-i18n-fr="Ã‰tat / pÃ©riode"
                                                           data-i18n-en="State / period"
                                                           data-i18n-ar="Ø§Ù„Ø­Ø§Ù„Ø© / Ø§Ù„ÙØªØ±Ø©">Ã‰tat / pÃ©riode</label>
        <select id="energy-select">
          <option value="equilibre">Ã‰quilibre / mois actuel</option>
          <option value="fatigue">Fatigue physique</option>
          <option value="moral_bas">Moral bas / stress</option>
        </select>
      </div>
      <div style="display:flex; align-items:flex-end;">
        <button onclick="genRecettes()" class="btn-gold" type="button">
          GÃ©nÃ©rer mes 3 repas
        </button>
      </div>
    </div>

    <!-- affichage rapide -->
    <div id="recipe-card-content">
      <p style="color:rgba(255,255,255,.6);">
        ğŸ½ï¸ Choisis ton signe et ton Ã©tat pour afficher ta recette personnalisÃ©e.<br>
        Par dÃ©faut : <strong>Taureau â€“ Ã©quilibre</strong>.
      </p>
    </div>

    <!-- affichage carte EDU complÃ¨te -->
    <div id="recipe-edu-display"></div>
  </section>

  <!-- SECTION : description -->
  <section style="margin-top:2.5rem;">
    <h2 style="color:#fff; margin-bottom:.75rem;" data-i18n-fr="Comment Ã§a marche ?"
                                                  data-i18n-en="How it works"
                                                  data-i18n-ar="ÙƒÙŠÙ ÙŠØ¹Ù…Ù„ØŸ">Comment Ã§a marche ?</h2>
    <p style="color:rgba(255,255,255,.6);" data-i18n-fr="Nous combinons le signe solaire, lâ€™Ã©tat Ã©nergÃ©tique (fatigue, stress, digestion) et un set de recettes afro/arabes/europÃ©ennes Ã©quilibrÃ©es. Lâ€™AI peut proposer des boissons (bissap, bouye, gingembre)."
                                           data-i18n-en="We combine sun sign, energy state (fatigue, stress, digestion) and a set of balanced Afro/Arab/European recipes. AI can suggest drinks (bissap, bouye, ginger)."
                                           data-i18n-ar="Ù†Ø­Ù† Ù†Ù…Ø²Ø¬ Ø¨ÙŠÙ† Ø§Ù„Ø¨Ø±Ø¬ Ø§Ù„Ø´Ù…Ø³ÙŠØŒ ÙˆØ§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø·Ø§Ù‚ÙŠØ© (ØªØ¹Ø¨ØŒ Ø¶ØºØ·ØŒ Ù‡Ø¶Ù…)ØŒ ÙˆÙ…Ø¬Ù…ÙˆØ¹Ø© ÙˆØµÙØ§Øª Ù…ØªÙˆØ§Ø²Ù†Ø© Ø£ÙØ±ÙŠÙ‚ÙŠØ©/Ø¹Ø±Ø¨ÙŠØ©/Ø£ÙˆØ±ÙˆØ¨ÙŠØ©. ÙˆÙŠÙ…ÙƒÙ† Ù„Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ø§Ù‚ØªØ±Ø§Ø­ Ù…Ø´Ø±ÙˆØ¨Ø§Øª (Ø§Ù„ÙƒØ±ÙƒØ¯ÙŠÙ‡ØŒ Ø§Ù„Ø¨Ø§ÙˆØ¨Ø§Ø¨ØŒ Ø§Ù„Ø²Ù†Ø¬Ø¨ÙŠÙ„).">
      Nous combinons le signe solaire, lâ€™Ã©tat Ã©nergÃ©tique (fatigue, stress, digestion) et un set de recettes afro/arabes/europÃ©ennes Ã©quilibrÃ©es. Lâ€™AI peut proposer des boissons (bissap, bouye, gingembre).
    </p>
  </section>
</main>

<!-- CHATBOT FLOTTANT -->
<div class="ai-bubble" id="chatbot">
  <div class="ai-header">
    <div>
      <strong>Chef-AI AstroFood</strong>
      <div style="font-size:.65rem; color:rgba(255,255,255,.55);">AI active par dÃ©faut</div>
    </div>
    <button onclick="closeChat()" style="background:none;border:none;color:#fff;cursor:pointer;">âœ•</button>
  </div>
  <div class="ai-messages" id="chat-messages">
    <div class="ai-msg">
      ğŸ‘‹ Salut ! Dis-moi â€œBÃ©lier fatigueâ€ ou â€œPoissons stressâ€ et je te donne 3 repas + 2 boissons + lien.
    </div>
  </div>
  <div class="ai-input">
    <input type="text" id="chat-input" placeholder="Ex: BÃ©lier fatigue..." onkeydown="if(event.key==='Enter'){sendMsg();}">
    <button class="btn-gold" style="padding:.4rem .7rem;" onclick="sendMsg()">â¤</button>
  </div>
</div>

<!-- SCRIPT GLOBAL -->
<script>
/* 1. Utilitaire : normaliser la langue */
function normalizeLang(lang) {
  if (!lang) return "french";
  if (lang === "fr" || lang === "french") return "french";
  if (lang === "en" || lang === "english") return "english";
  if (lang === "ar" || lang === "arabic") return "arabic";
  return "french";
}
function getLangKey(l) {
  const n = normalizeLang(l);
  if (n === "english") return "en";
  if (n === "arabic") return "ar";
  return "fr";
}

/* 2. BASE DE DONNÃ‰ES COURTE (affichage rapide) */
const ASTRO_DB = {
  /* je mets que 3 Ã©tats : equilibre / fatigue / moral_bas
     mais pour les 12 signes */
  "aries": {
    "equilibre": {
      fr: { title: "BÃ©lier â€“ Ã©nergie maÃ®trisÃ©e", prevention:"Bois de lâ€™eau, plats tiÃ¨des.", petit_dej:"Bouillie de mil coco-dattes", dejeuner:"Yassa poulet citronnÃ© + riz complet", diner:"Poisson vapeur et lÃ©gumes racines" },
      en: { title: "Aries â€“ balanced fire", prevention:"Drink water, eat warm light food.", petit_dej:"Millet porridge with coconut & dates", dejeuner:"Light chicken yassa + brown rice", diner:"Steamed fish with roots" },
      ar: { title: "Ø§Ù„Ø­Ù…Ù„ â€“ Ø·Ø§Ù‚Ø© Ù…ØªÙˆØ§Ø²Ù†Ø©", prevention:"Ø§Ø´Ø±Ø¨ Ù…Ø§Ø¡ ÙˆØªÙ†Ø§ÙˆÙ„ Ø·Ø¹Ø§Ù…Ù‹Ø§ Ø¯Ø§ÙØ¦Ù‹Ø§.", petit_dej:"Ø¹ØµÙŠØ¯Ø© Ø¯Ø®Ù† Ø¨Ø­Ù„ÙŠØ¨ Ø¬ÙˆØ² Ø§Ù„Ù‡Ù†Ø¯ ÙˆØ§Ù„ØªÙ…Ø±", dejeuner:"ÙŠØ§Ø³Ø§ Ø¯Ø¬Ø§Ø¬ Ø®ÙÙŠÙ + Ø£Ø±Ø² ÙƒØ§Ù…Ù„", diner:"Ø³Ù…Ùƒ Ù…Ø·Ù‡ÙˆÙ‘ Ø¹Ù„Ù‰ Ø§Ù„Ø¨Ø®Ø§Ø± Ø¨Ø®Ø¶Ø§Ø±" }
    },
    "fatigue": {
      fr: { title:"BÃ©lier â€“ Mars affaibli", prevention:"Ã‰vite sucre raffinÃ©.", petit_dej:"Smoothie banane-gingembre-avoine", dejeuner:"Thiakry protÃ©inÃ© aux fruits secs", diner:"Soupe de lentilles et carottes" },
      en: { title:"Aries â€“ low Mars", prevention:"Avoid sugar.", petit_dej:"Banana ginger oat smoothie", dejeuner:"Protein thiakry", diner:"Lentil-carrot soup" },
      ar: { title:"Ø§Ù„Ø­Ù…Ù„ â€“ ØªØ¹Ø¨", prevention:"ØªØ¬Ù†Ø¨ Ø§Ù„Ø³ÙƒØ±.", petit_dej:"Ø³Ù…ÙˆØ«ÙŠ Ù…ÙˆØ² ÙˆØ²Ù†Ø¬Ø¨ÙŠÙ„ ÙˆØ´ÙˆÙØ§Ù†", dejeuner:"Ø«ÙŠØ§ÙƒØ±ÙŠ ØºÙ†ÙŠ", diner:"Ø´ÙˆØ±Ø¨Ø© Ø¹Ø¯Ø³ ÙˆØ¬Ø²Ø±" }
    },
    "moral_bas": {
      fr: { title:"BÃ©lier â€“ Moral en baisse", prevention:"LumiÃ¨re du soleil.", petit_dej:"Pain complet + miel + tisane", dejeuner:"Poulet grillÃ© + salade quinoa", diner:"Riz au lait de coco" },
      en: { title:"Aries â€“ low mood", prevention:"Get sun.", petit_dej:"Whole bread + honey", dejeuner:"Grilled chicken + quinoa", diner:"Coconut rice pudding" },
      ar: { title:"Ø§Ù„Ø­Ù…Ù„ â€“ Ù…Ø²Ø§Ø¬ Ù…Ù†Ø®ÙØ¶", prevention:"ØªØ¹Ø±Ù‘Ø¶ Ù„Ù„Ø´Ù…Ø³.", petit_dej:"Ø®Ø¨Ø² ÙƒØ§Ù…Ù„ Ø¨Ø§Ù„Ø¹Ø³Ù„", dejeuner:"Ø¯Ø¬Ø§Ø¬ Ù…Ø´ÙˆÙŠ + ÙƒÙŠÙ†ÙˆØ§", diner:"Ø£Ø±Ø² Ø¨Ø­Ù„ÙŠØ¨ Ø¬ÙˆØ² Ø§Ù„Ù‡Ù†Ø¯" }
    }
  },
  "taurus": {
    "equilibre": {
      fr:{title:"Taureau â€“ VÃ©nus en harmonie",prevention:"Ã‰vite plats lourds le soir.",petit_dej:"Thiakry lÃ©ger au lait caillÃ©",dejeuner:"MafÃ© lÃ©ger Ã  la viande",diner:"Poisson au four + patate douce"},
      en:{title:"Taurus â€“ Venus in harmony",prevention:"Avoid heavy meals at night.",petit_dej:"Light thiakry",dejeuner:"Light peanut stew",diner:"Baked fish + sweet potato"},
      ar:{title:"Ø§Ù„Ø«ÙˆØ± â€“ Ø§Ù„Ø²Ù‡Ø±Ø© Ù…Ù†Ø³Ø¬Ù…Ø©",prevention:"ØªØ¬Ù†Ø¨ Ø§Ù„Ø£ÙƒÙ„ Ø§Ù„Ø¯Ø³Ù… Ù„ÙŠÙ„Ø§Ù‹.",petit_dej:"Ø«ÙŠØ§ÙƒØ±ÙŠ Ø®ÙÙŠÙ",dejeuner:"Ù…Ø§ÙÙŠ Ø®ÙÙŠÙ",diner:"Ø³Ù…Ùƒ Ø¨Ø§Ù„ÙØ±Ù† Ù…Ø¹ Ø¨Ø·Ø§Ø·Ø§ Ø­Ù„ÙˆØ©"}
    },
    "fatigue": {
      fr:{title:"Taureau â€“ digestion lente",prevention:"Citron + gingembre.",petit_dej:"Jus citron chaud au miel",dejeuner:"Riz aux lÃ©gumes verts + poisson",diner:"Soupe de courgette et menthe"},
      en:{title:"Taurus â€“ slow digestion",prevention:"Add lemon-ginger",petit_dej:"Warm lemon-honey drink",dejeuner:"Green-veg rice + fish",diner:"Zucchini-mint soup"},
      ar:{title:"Ø§Ù„Ø«ÙˆØ± â€“ Ù‡Ø¶Ù… Ø¨Ø·ÙŠØ¡",prevention:"Ø£Ø¶Ù Ø§Ù„Ù„ÙŠÙ…ÙˆÙ† ÙˆØ§Ù„Ø²Ù†Ø¬Ø¨ÙŠÙ„",petit_dej:"Ù„ÙŠÙ…ÙˆÙ† Ø¯Ø§ÙØ¦ Ø¨Ø§Ù„Ø¹Ø³Ù„",dejeuner:"Ø£Ø±Ø² Ø¨Ø§Ù„Ø®Ø¶Ø§Ø± ÙˆØ³Ù…Ùƒ",diner:"Ø´ÙˆØ±Ø¨Ø© ÙƒÙˆØ³Ø© ÙˆÙ†Ø¹Ù†Ø§Ø¹"}
    },
    "moral_bas": {
      fr:{title:"Taureau â€“ besoin de douceur",prevention:"Cuisine avec musique.",petit_dej:"Pain grillÃ© + beurre de cacahuÃ¨te",dejeuner:"PÃ¢tes pesto et parmesan",diner:"Soupe crÃ©meuse de patate douce"},
      en:{title:"Taurus â€“ need for comfort",prevention:"Cook slowly.",petit_dej:"Toast + peanut butter",dejeuner:"Pasta with pesto",diner:"Creamy sweet potato soup"},
      ar:{title:"Ø§Ù„Ø«ÙˆØ± â€“ Ø¨Ø­Ø§Ø¬Ø© Ù„Ù„Ø±Ø§Ø­Ø©",prevention:"Ø§Ø·Ø¨Ø® Ø¨Ù‡Ø¯ÙˆØ¡.",petit_dej:"ØªÙˆØ³Øª Ø¨Ø²Ø¨Ø¯Ø© Ø§Ù„ÙÙˆÙ„ Ø§Ù„Ø³ÙˆØ¯Ø§Ù†ÙŠ",dejeuner:"Ø¨Ø§Ø³ØªØ§ Ø¨Ø§Ù„Ø¨ÙŠØ³ØªÙˆ",diner:"Ø´ÙˆØ±Ø¨Ø© Ø¨Ø·Ø§Ø·Ø§ Ø­Ù„ÙˆØ©"}
    }
  },
  "gemini": {
    "equilibre": {
      fr:{title:"GÃ©meaux â€“ Mercure vif",prevention:"Ã‰vite grignotage.",petit_dej:"CrÃªpes lÃ©gÃ¨res miel-citron",dejeuner:"PoÃªlÃ©e de lÃ©gumes + poulet",diner:"Soupe vermicelle au poulet"},
      en:{title:"Gemini â€“ agile mind",prevention:"Avoid snacking.",petit_dej:"Honey-lemon pancakes",dejeuner:"Veggie stir-fry + chicken",diner:"Chicken vermicelli soup"},
      ar:{title:"Ø§Ù„Ø¬ÙˆØ²Ø§Ø¡ â€“ Ø¹Ù‚Ù„ Ù†Ø´Ø·",prevention:"ØªØ¬Ù†Ø¨ Ø§Ù„Ø£ÙƒÙ„ Ø§Ù„Ù…ØªÙ‚Ø·Ø¹.",petit_dej:"ÙØ·Ø§Ø¦Ø± Ø¨Ø§Ù„Ø¹Ø³Ù„ ÙˆØ§Ù„Ù„ÙŠÙ…ÙˆÙ†",dejeuner:"Ø®Ø¶Ø§Ø± Ù…Ø¹ Ø¯Ø¬Ø§Ø¬",diner:"Ø´ÙˆØ±Ø¨Ø© Ø´Ø¹Ø±ÙŠØ© Ø¨Ø§Ù„Ø¯Ø¬Ø§Ø¬"}
    },
    "fatigue": {
      fr:{title:"GÃ©meaux â€“ trop dâ€™infos",prevention:"Tisane menthe.",petit_dej:"Yaourt grec + granola",dejeuner:"Riz basmati + poisson vapeur",diner:"Soupe de lentilles corail"},
      en:{title:"Gemini â€“ info overload",prevention:"Mint tea.",petit_dej:"Greek yogurt + granola",dejeuner:"Basmati rice + steamed fish",diner:"Red lentil soup"},
      ar:{title:"Ø§Ù„Ø¬ÙˆØ²Ø§Ø¡ â€“ Ø¥ÙØ±Ø§Ø· Ù…Ø¹Ù„ÙˆÙ…Ø§Øª",prevention:"Ø§Ø´Ø±Ø¨ Ù†Ø¹Ù†Ø§Ø¹.",petit_dej:"Ø²Ø¨Ø§Ø¯ÙŠ ÙŠÙˆÙ†Ø§Ù†ÙŠ",dejeuner:"Ø£Ø±Ø² Ø¨Ø³Ù…ØªÙŠ ÙˆØ³Ù…Ùƒ",diner:"Ø´ÙˆØ±Ø¨Ø© Ø¹Ø¯Ø³"}
    },
    "moral_bas": {
      fr:{title:"GÃ©meaux â€“ nervositÃ©",prevention:"Repas chaud.",petit_dej:"Pain complet + omelette",dejeuner:"Tajine de pois chiches",diner:"Riz au lait et cannelle"},
      en:{title:"Gemini â€“ nervous",prevention:"Warm food.",petit_dej:"Whole bread + omelet",dejeuner:"Chickpea tajine",diner:"Rice pudding with cinnamon"},
      ar:{title:"Ø§Ù„Ø¬ÙˆØ²Ø§Ø¡ â€“ ØªÙˆØªØ±",prevention:"Ø·Ø¹Ø§Ù… Ø¯Ø§ÙØ¦.",petit_dej:"Ø®Ø¨Ø² ÙƒØ§Ù…Ù„ + Ø¹Ø¬Ø©",dejeuner:"Ø·Ø§Ø¬ÙŠÙ† Ø­Ù…Øµ",diner:"Ø£Ø±Ø² Ø¨Ø§Ù„Ø­Ù„ÙŠØ¨"}
    }
  },
  "cancer": {
    "equilibre": {
      fr:{title:"Cancer â€“ protection de la Lune",prevention:"Mange chaud.",petit_dej:"Bouillie de riz au lait",dejeuner:"Poisson sauce oignons + riz",diner:"Soupe douce de lÃ©gumes"},
      en:{title:"Cancer â€“ moon protection",prevention:"Eat warm.",petit_dej:"Rice porridge with milk",dejeuner:"Fish in onion sauce + rice",diner:"Soft vegetable soup"},
      ar:{title:"Ø§Ù„Ø³Ø±Ø·Ø§Ù† â€“ Ø­Ù…Ø§ÙŠØ© Ø§Ù„Ù‚Ù…Ø±",prevention:"ØªÙ†Ø§ÙˆÙ„ Ø·Ø¹Ø§Ù…Ø§Ù‹ Ø¯Ø§ÙØ¦Ø§Ù‹.",petit_dej:"Ø¹ØµÙŠØ¯Ø© Ø£Ø±Ø² Ø¨Ø§Ù„Ø­Ù„ÙŠØ¨",dejeuner:"Ø³Ù…Ùƒ Ø¨ØµÙ„ØµØ© Ø¨ØµÙ„ ÙˆØ£Ø±Ø²",diner:"Ø´ÙˆØ±Ø¨Ø© Ø®Ø¶Ø§Ø±"}
    },
    "fatigue": {
      fr:{title:"Cancer â€“ sensibilitÃ© digestive",prevention:"Fractionne + gingembre.",petit_dej:"Tisane gingembre-miel",dejeuner:"Riz blanc + carottes et poisson",diner:"Soupe de poulet"},
      en:{title:"Cancer â€“ sensitive digestion",prevention:"Small meals.",petit_dej:"Ginger-honey tea",dejeuner:"White rice + carrots and fish",diner:"Chicken soup"},
      ar:{title:"Ø§Ù„Ø³Ø±Ø·Ø§Ù† â€“ Ù‡Ø¶Ù… Ø­Ø³Ø§Ø³",prevention:"Ù‚Ø³Ù‘Ù… Ø§Ù„ÙˆØ¬Ø¨Ø§Øª.",petit_dej:"Ø´Ø§ÙŠ Ø²Ù†Ø¬Ø¨ÙŠÙ„ Ø¨Ø§Ù„Ø¹Ø³Ù„",dejeuner:"Ø£Ø±Ø² ÙˆØ¬Ø²Ø± ÙˆØ³Ù…Ùƒ",diner:"Ø´ÙˆØ±Ø¨Ø© Ø¯Ø¬Ø§Ø¬"}
    },
    "moral_bas": {
      fr:{title:"Cancer â€“ Ã©motions lourdes",prevention:"Mange simple.",petit_dej:"Pain complet + confiture",dejeuner:"LÃ©gumes mijotÃ©s + semoule",diner:"CrÃ¨me de maÃ¯s"},
      en:{title:"Cancer â€“ heavy emotions",prevention:"Simple meals.",petit_dej:"Whole bread + jam",dejeuner:"Stewed vegetables + semolina",diner:"Corn cream soup"},
      ar:{title:"Ø§Ù„Ø³Ø±Ø·Ø§Ù† â€“ Ù…Ø´Ø§Ø¹Ø± Ø«Ù‚ÙŠÙ„Ø©",prevention:"Ø·Ø¹Ø§Ù… Ø¨Ø³ÙŠØ·.",petit_dej:"Ø®Ø¨Ø² ÙƒØ§Ù…Ù„ Ù…Ø¹ Ù…Ø±Ø¨Ù‰",dejeuner:"Ø®Ø¶Ø§Ø± Ù…Ø·Ù‡ÙŠØ© Ù…Ø¹ Ø³Ù…ÙŠØ¯",diner:"Ø´ÙˆØ±Ø¨Ø© Ø°Ø±Ø©"}
    }
  },
  "leo": {
    "equilibre": {
      fr:{title:"Lion â€“ vitalitÃ© solaire",prevention:"Hydrate-toi.",petit_dej:"Salade de fruits tropicaux au miel",dejeuner:"Poulet rÃ´ti citron-thym + couscous",diner:"Soupe froide carotte-orange"},
      en:{title:"Leo â€“ solar vitality",prevention:"Hydrate.",petit_dej:"Tropical fruit salad",dejeuner:"Roasted chicken + couscous",diner:"Cold carrot-orange soup"},
      ar:{title:"Ø§Ù„Ø£Ø³Ø¯ â€“ Ø­ÙŠÙˆÙŠØ© Ø´Ù…Ø³ÙŠØ©",prevention:"Ø§Ø´Ø±Ø¨ Ù…Ø§Ø¡.",petit_dej:"Ø³Ù„Ø·Ø© ÙÙˆØ§ÙƒÙ‡ Ø§Ø³ØªÙˆØ§Ø¦ÙŠØ©",dejeuner:"Ø¯Ø¬Ø§Ø¬ Ù…Ø´ÙˆÙŠ Ø¨Ø§Ù„Ù„ÙŠÙ…ÙˆÙ† + ÙƒØ³ÙƒØ³",diner:"Ø´ÙˆØ±Ø¨Ø© Ø¬Ø²Ø± ÙˆØ¨Ø±ØªÙ‚Ø§Ù„ Ø¨Ø§Ø±Ø¯Ø©"}
    },
    "fatigue": {
      fr:{title:"Lion â€“ perte dâ€™Ã©clat",prevention:"Agrumes + curcuma.",petit_dej:"Jus dâ€™orange + pain complet",dejeuner:"RagoÃ»t de lentilles au curcuma",diner:"Riz sautÃ© crevettes-citron"},
      en:{title:"Leo â€“ low radiance",prevention:"Citrus & turmeric.",petit_dej:"Orange juice + bread",dejeuner:"Lentil stew",diner:"Shrimp fried rice"},
      ar:{title:"Ø§Ù„Ø£Ø³Ø¯ â€“ Ù„Ù…Ø¹Ø§Ù† Ù…Ù†Ø®ÙØ¶",prevention:"Ø­Ù…Ø¶ÙŠØ§Øª ÙˆÙƒØ±ÙƒÙ….",petit_dej:"Ø¹ØµÙŠØ± Ø¨Ø±ØªÙ‚Ø§Ù„",dejeuner:"ÙŠØ®Ù†Ø© Ø¹Ø¯Ø³",diner:"Ø£Ø±Ø² Ø¨Ø§Ù„Ù‚Ø±ÙŠØ¯Ø³"}
    },
    "moral_bas": {
      fr:{title:"Lion â€“ manque de confiance",prevention:"Mets des couleurs.",petit_dej:"Omelette tomate-oignon",dejeuner:"Tajine de lÃ©gumes racines",diner:"Curry doux de pois chiches"},
      en:{title:"Leo â€“ low confidence",prevention:"Colorful food.",petit_dej:"Tomato-onion omelet",dejeuner:"Root veggie tagine",diner:"Mild chickpea curry"},
      ar:{title:"Ø§Ù„Ø£Ø³Ø¯ â€“ Ø¶Ø¹Ù Ø§Ù„Ø«Ù‚Ø©",prevention:"Ø·Ø¹Ø§Ù… Ù…Ù„ÙˆÙ‘Ù†.",petit_dej:"Ø¹Ø¬Ø© Ø¨Ø§Ù„Ø¨ØµÙ„",dejeuner:"Ø·Ø§Ø¬ÙŠÙ† Ø®Ø¶Ø§Ø±",diner:"ÙƒØ§Ø±ÙŠ Ø­Ù…Øµ Ø®ÙÙŠÙ"}
    }
  },
  "virgo": {
    "equilibre": {
      fr:{title:"Vierge â€“ esprit clair",prevention:"LÃ©ger le matin.",petit_dej:"Smoothie avoine-banane-menthe",dejeuner:"Salade quinoa pois chiches",diner:"Soupe carotte-cumin"},
      en:{title:"Virgo â€“ clear mind",prevention:"Light breakfast.",petit_dej:"Oat-banana-mint smoothie",dejeuner:"Quinoa bowl",diner:"Carrot-cumin soup"},
      ar:{title:"Ø§Ù„Ø¹Ø°Ø±Ø§Ø¡ â€“ Ø°Ù‡Ù† ØµØ§ÙÙ",prevention:"ÙØ·ÙˆØ± Ø®ÙÙŠÙ.",petit_dej:"Ø³Ù…ÙˆØ«ÙŠ Ø´ÙˆÙØ§Ù† ÙˆÙ…ÙˆØ²",dejeuner:"ÙƒÙŠÙ†ÙˆØ§ Ù…Ø¹ Ø­Ù…Øµ",diner:"Ø´ÙˆØ±Ø¨Ø© Ø¬Ø²Ø± ÙˆÙƒÙ…ÙˆÙ†"}
    },
    "fatigue": {
      fr:{title:"Vierge â€“ esprit dispersÃ©",prevention:"Fer + magnÃ©sium.",petit_dej:"Pain complet + purÃ©e dâ€™amande",dejeuner:"Bowl riz complet, lentilles, avocat",diner:"Soupe miso et tofu"},
      en:{title:"Virgo â€“ scattered mind",prevention:"Add iron.",petit_dej:"Whole bread + almond",dejeuner:"Brown rice bowl",diner:"Miso soup"},
      ar:{title:"Ø§Ù„Ø¹Ø°Ø±Ø§Ø¡ â€“ ØªØ´ØªØª Ø°Ù‡Ù†ÙŠ",prevention:"Ø£Ø¶Ù Ø§Ù„Ø­Ø¯ÙŠØ¯.",petit_dej:"Ø®Ø¨Ø² ÙƒØ§Ù…Ù„ + Ø²Ø¨Ø¯Ø© Ù„ÙˆØ²",dejeuner:"Ø£Ø±Ø² Ø¨Ù†ÙŠ Ù…Ø¹ Ø¹Ø¯Ø³",diner:"Ø´ÙˆØ±Ø¨Ø© Ù…ÙŠØ²Ùˆ"}
    },
    "moral_bas": {
      fr:{title:"Vierge â€“ trop dâ€™analyse",prevention:"Tisane bouye/menthe.",petit_dej:"Pain de seigle + confiture",dejeuner:"Soupe potiron et pois cassÃ©s",diner:"Riz complet aux lÃ©gumes"},
      en:{title:"Virgo â€“ overthinking",prevention:"Baobab/mint tea.",petit_dej:"Rye bread + jam",dejeuner:"Pumpkin & split-pea soup",diner:"Brown rice + veggies"},
      ar:{title:"Ø§Ù„Ø¹Ø°Ø±Ø§Ø¡ â€“ ØªÙÙƒÙŠØ± Ø²Ø§Ø¦Ø¯",prevention:"Ø´Ø±Ø§Ø¨ Ø¨Ø§ÙˆØ¨Ø§Ø¨.",petit_dej:"Ø®Ø¨Ø² Ø¬Ø§ÙˆØ¯Ø§Ø± + Ù…Ø±Ø¨Ù‰",dejeuner:"Ø´ÙˆØ±Ø¨Ø© Ù‚Ø±Ø¹",diner:"Ø£Ø±Ø² Ø¨Ù†ÙŠ Ø¨Ø®Ø¶Ø§Ø±"}
    }
  },
  "libra": {
    "equilibre": {
      fr:{title:"Balance â€“ harmonie intÃ©rieure",prevention:"Ã‰vite transformÃ©s.",petit_dej:"Yaourt grec + miel",dejeuner:"PÃ¢tes complÃ¨tes aux lÃ©gumes grillÃ©s",diner:"Soupe potimarron-gingembre"},
      en:{title:"Libra â€“ inner balance",prevention:"Avoid processed.",petit_dej:"Greek yogurt + honey",dejeuner:"Whole pasta + grilled veggies",diner:"Pumpkin-ginger soup"},
      ar:{title:"Ø§Ù„Ù…ÙŠØ²Ø§Ù† â€“ ØªÙˆØ§Ø²Ù† Ø¯Ø§Ø®Ù„ÙŠ",prevention:"ØªØ¬Ù†Ø¨ Ø§Ù„Ù…ØµÙ†Ø¹.",petit_dej:"Ø²Ø¨Ø§Ø¯ÙŠ ÙŠÙˆÙ†Ø§Ù†ÙŠ Ø¨Ø§Ù„Ø¹Ø³Ù„",dejeuner:"Ù…Ø¹ÙƒØ±ÙˆÙ†Ø© Ù‚Ù…Ø­ ÙƒØ§Ù…Ù„",diner:"Ø´ÙˆØ±Ø¨Ø© Ù‚Ø±Ø¹ ÙˆØ²Ù†Ø¬Ø¨ÙŠÙ„"}
    },
    "fatigue": {
      fr:{title:"Balance â€“ fatigue mentale",prevention:"Infusions lÃ©gÃ¨res.",petit_dej:"Tisane verveine + biscotte",dejeuner:"Salade avocat-riz-lentilles",diner:"Soupe pois cassÃ©s"},
      en:{title:"Libra â€“ mental fatigue",prevention:"Herbal teas.",petit_dej:"Verbena tea",dejeuner:"Avocado-rice-lentil salad",diner:"Split pea soup"},
      ar:{title:"Ø§Ù„Ù…ÙŠØ²Ø§Ù† â€“ ØªØ¹Ø¨ Ø°Ù‡Ù†ÙŠ",prevention:"Ø´Ø§ÙŠ Ø£Ø¹Ø´Ø§Ø¨.",petit_dej:"Ø´Ø§ÙŠ Ù„ÙˆÙŠØ²Ø©",dejeuner:"Ø³Ù„Ø·Ø© Ø£ÙÙˆÙƒØ§Ø¯Ùˆ ÙˆØ¹Ø¯Ø³",diner:"Ø´ÙˆØ±Ø¨Ø© Ø¨Ø§Ø²Ù„Ø§Ø¡"}
    },
    "moral_bas": {
      fr:{title:"Balance â€“ humeur changeante",prevention:"Jus verts.",petit_dej:"Jus pomme-menthe",dejeuner:"Riz pilaf aux lÃ©gumes",diner:"Couscous vÃ©gÃ©tarien"},
      en:{title:"Libra â€“ shifting mood",prevention:"Green food.",petit_dej:"Apple-mint juice",dejeuner:"Veg pilaf rice",diner:"Vegetarian couscous"},
      ar:{title:"Ø§Ù„Ù…ÙŠØ²Ø§Ù† â€“ Ù…Ø²Ø§Ø¬ Ù…ØªÙ‚Ù„Ø¨",prevention:"Ø¹ØµØ§Ø¦Ø± Ø®Ø¶Ø±Ø§Ø¡.",petit_dej:"Ø¹ØµÙŠØ± ØªÙØ§Ø­ ÙˆÙ†Ø¹Ù†Ø§Ø¹",dejeuner:"Ø£Ø±Ø² Ø¨Ø§Ù„Ø®Ø¶Ø§Ø±",diner:"ÙƒØ³ÙƒØ³ Ù†Ø¨Ø§ØªÙŠ"}
    }
  },
  "scorpio": {
    "equilibre": {
      fr:{title:"Scorpion â€“ force Ã©motionnelle",prevention:"ProtÃ©ines maigres.",petit_dej:"Å’ufs brouillÃ©s + avocat",dejeuner:"RagoÃ»t de bÅ“uf aux lÃ©gumes",diner:"Soupe de lÃ©gumes racines"},
      en:{title:"Scorpio â€“ emotional strength",prevention:"Lean protein.",petit_dej:"Scrambled eggs + avocado",dejeuner:"Beef stew",diner:"Root vegetable soup"},
      ar:{title:"Ø§Ù„Ø¹Ù‚Ø±Ø¨ â€“ Ù‚ÙˆØ© Ø¹Ø§Ø·ÙÙŠØ©",prevention:"Ø¨Ø±ÙˆØªÙŠÙ†Ø§Øª Ø®ÙÙŠÙØ©.",petit_dej:"Ø¨ÙŠØ¶ Ù…Ø®ÙÙˆÙ‚ + Ø£ÙÙˆÙƒØ§Ø¯Ùˆ",dejeuner:"ÙŠØ®Ù†Ø© Ù„Ø­Ù… Ø¨Ø®Ø¶Ø§Ø±",diner:"Ø´ÙˆØ±Ø¨Ø© Ø¬Ø°ÙˆØ±"}
    },
    "fatigue": {
      fr:{title:"Scorpion â€“ tension intÃ©rieure",prevention:"Pas de viande rouge le soir.",petit_dej:"Tisane cannelle-gingembre",dejeuner:"Riz aux lÃ©gumes et poulet",diner:"Soupe patate douce"},
      en:{title:"Scorpio â€“ inner tension",prevention:"No red meat at night.",petit_dej:"Cinnamon-ginger tea",dejeuner:"Veg rice + chicken",diner:"Sweet potato soup"},
      ar:{title:"Ø§Ù„Ø¹Ù‚Ø±Ø¨ â€“ ØªÙˆØªØ± Ø¯Ø§Ø®Ù„ÙŠ",prevention:"ØªØ¬Ù†Ø¨ Ø§Ù„Ù„Ø­Ù… Ù„ÙŠÙ„Ø§Ù‹.",petit_dej:"Ø´Ø§ÙŠ Ù‚Ø±ÙØ© ÙˆØ²Ù†Ø¬Ø¨ÙŠÙ„",dejeuner:"Ø£Ø±Ø² Ø¨Ø§Ù„Ø®Ø¶Ø§Ø± ÙˆØ¯Ø¬Ø§Ø¬",diner:"Ø´ÙˆØ±Ø¨Ø© Ø¨Ø·Ø§Ø·Ø§ Ø­Ù„ÙˆØ©"}
    },
    "moral_bas": {
      fr:{title:"Scorpion â€“ besoin de purification",prevention:"JournÃ©e dÃ©tox.",petit_dej:"Eau chaude citronnÃ©e",dejeuner:"LÃ©gumes vapeur + poisson",diner:"Soupe claire de lÃ©gumes"},
      en:{title:"Scorpio â€“ need for cleansing",prevention:"Detox day.",petit_dej:"Warm lemon water",dejeuner:"Steamed veggies + fish",diner:"Clear veg soup"},
      ar:{title:"Ø§Ù„Ø¹Ù‚Ø±Ø¨ â€“ Ø­Ø§Ø¬Ø© Ù„Ù„ØªÙ†Ù‚ÙŠØ©",prevention:"Ø¯ÙŠØªÙˆÙƒØ³.",petit_dej:"Ù…Ø§Ø¡ Ø¯Ø§ÙØ¦ Ø¨Ø§Ù„Ù„ÙŠÙ…ÙˆÙ†",dejeuner:"Ø®Ø¶Ø§Ø± Ø¨Ø§Ù„Ø¨Ø®Ø§Ø± Ù…Ø¹ Ø³Ù…Ùƒ",diner:"Ø´ÙˆØ±Ø¨Ø© Ø®ÙÙŠÙØ©"}
    }
  },
  "sagittarius": {
    "equilibre": {
      fr:{title:"Sagittaire â€“ expansion joyeuse",prevention:"ModÃ¨re sel/sauces.",petit_dej:"Porridge aux fruits secs",dejeuner:"Poulet grillÃ© + lÃ©gumes vapeur",diner:"Soupe riz/pois cassÃ©s"},
      en:{title:"Sagittarius â€“ joyful expansion",prevention:"Limit salt.",petit_dej:"Dried-fruit porridge",dejeuner:"Grilled chicken + vegetables",diner:"Rice & pea soup"},
      ar:{title:"Ø§Ù„Ù‚ÙˆØ³ â€“ ØªÙˆØ³Ù‘Ø¹ Ù…Ø¨Ù‡Ø¬",prevention:"Ù‚Ù„Ù„ Ø§Ù„Ù…Ù„Ø­.",petit_dej:"Ø¹ØµÙŠØ¯Ø© ÙÙˆØ§ÙƒÙ‡ Ù…Ø¬ÙÙØ©",dejeuner:"Ø¯Ø¬Ø§Ø¬ Ù…Ø´ÙˆÙŠ + Ø®Ø¶Ø§Ø±",diner:"Ø´ÙˆØ±Ø¨Ø© Ø£Ø±Ø² ÙˆØ¨Ø§Ø²Ù„Ø§Ø¡"}
    },
    "fatigue": {
      fr:{title:"Sagittaire â€“ manque dâ€™Ã©lan",prevention:"Repas frÃ©quents.",petit_dej:"Smoothie banane-avoine-miel",dejeuner:"Poisson au four + riz complet",diner:"Soupe de courge au gingembre"},
      en:{title:"Sagittarius â€“ low drive",prevention:"Small meals.",petit_dej:"Banana-oat-honey smoothie",dejeuner:"Baked fish + brown rice",diner:"Pumpkin-ginger soup"},
      ar:{title:"Ø§Ù„Ù‚ÙˆØ³ â€“ ÙÙ‚Ø¯Ø§Ù† Ø§Ù„Ø­Ù…Ø§Ø³",prevention:"ÙˆØ¬Ø¨Ø§Øª ØµØºÙŠØ±Ø©.",petit_dej:"Ø³Ù…ÙˆØ«ÙŠ Ù…ÙˆØ² ÙˆØ´ÙˆÙØ§Ù†",dejeuner:"Ø³Ù…Ùƒ Ø¨Ø§Ù„ÙØ±Ù† + Ø£Ø±Ø²",diner:"Ø´ÙˆØ±Ø¨Ø© Ù‚Ø±Ø¹ ÙˆØ²Ù†Ø¬Ø¨ÙŠÙ„"}
    },
    "moral_bas": {
      fr:{title:"Sagittaire â€“ esprit dispersÃ©",prevention:"Bois bissap.",petit_dej:"Pain complet + confiture",dejeuner:"Riz jollof vÃ©gÃ©tarien",diner:"Soupe lentilles-coriandre"},
      en:{title:"Sagittarius â€“ scattered mind",prevention:"Drink hibiscus.",petit_dej:"Whole bread + jam",dejeuner:"Veg jollof rice",diner:"Lentil-coriander soup"},
      ar:{title:"Ø§Ù„Ù‚ÙˆØ³ â€“ ØªØ´ØªØª Ø°Ù‡Ù†",prevention:"Ø§Ø´Ø±Ø¨ ÙƒØ±ÙƒØ¯ÙŠÙ‡.",petit_dej:"Ø®Ø¨Ø² ÙƒØ§Ù…Ù„ + Ù…Ø±Ø¨Ù‰",dejeuner:"Ø£Ø±Ø² Ø¬ÙˆÙ„ÙˆÙ Ù†Ø¨Ø§ØªÙŠ",diner:"Ø´ÙˆØ±Ø¨Ø© Ø¹Ø¯Ø³ ÙˆÙƒØ²Ø¨Ø±Ø©"}
    }
  },
  "capricorn": {
    "equilibre": {
      fr:{title:"Capricorne â€“ stabilitÃ© saturnienne",prevention:"Repas Ã  heures fixes.",petit_dej:"Bouillie dâ€™avoine au miel",dejeuner:"Riz brun + lÃ©gumes sautÃ©s",diner:"Soupe de lÃ©gumes verts"},
      en:{title:"Capricorn â€“ stability",prevention:"Fixed meal times.",petit_dej:"Honey oatmeal",dejeuner:"Brown rice + veggies",diner:"Green-veg soup"},
      ar:{title:"Ø§Ù„Ø¬Ø¯ÙŠ â€“ Ø§Ø³ØªÙ‚Ø±Ø§Ø±",prevention:"ÙˆØ¬Ø¨Ø§Øª Ù…Ù†ØªØ¸Ù…Ø©.",petit_dej:"Ø´ÙˆÙØ§Ù† Ø¨Ø§Ù„Ø¹Ø³Ù„",dejeuner:"Ø£Ø±Ø² Ø¨Ù†ÙŠ Ù…Ø¹ Ø®Ø¶Ø§Ø±",diner:"Ø´ÙˆØ±Ø¨Ø© Ø®Ø¶Ø§Ø± Ø®Ø¶Ø±Ø§Ø¡"}
    },
    "fatigue": {
      fr:{title:"Capricorne â€“ surmenage",prevention:"Dors tÃ´t.",petit_dej:"ThÃ© menthe + tartine complÃ¨te",dejeuner:"Soupe miso + tofu",diner:"Bouillie de riz et lÃ©gumes"},
      en:{title:"Capricorn â€“ overwork",prevention:"Sleep early.",petit_dej:"Mint tea + whole toast",dejeuner:"Miso soup + tofu",diner:"Rice-veggie porridge"},
      ar:{title:"Ø§Ù„Ø¬Ø¯ÙŠ â€“ Ø¥Ø±Ù‡Ø§Ù‚",prevention:"Ù†Ù… Ù…Ø¨ÙƒØ±Ø§Ù‹.",petit_dej:"Ø´Ø§ÙŠ Ù†Ø¹Ù†Ø§Ø¹ + Ø®Ø¨Ø² ÙƒØ§Ù…Ù„",dejeuner:"Ø´ÙˆØ±Ø¨Ø© Ù…ÙŠØ²Ùˆ",diner:"Ø¹ØµÙŠØ¯Ø© Ø£Ø±Ø² ÙˆØ®Ø¶Ø§Ø±"}
    },
    "moral_bas": {
      fr:{title:"Capricorne â€“ doute intÃ©rieur",prevention:"Tisane relaxante.",petit_dej:"Tisane camomille + biscuit avoine",dejeuner:"PÃ¢tes lÃ©gÃ¨res + lÃ©gumes grillÃ©s",diner:"Soupe carotte-curry"},
      en:{title:"Capricorn â€“ inner doubt",prevention:"Relaxing tea.",petit_dej:"Chamomile tea + oat biscuit",dejeuner:"Light pasta + grilled veggies",diner:"Carrot-curry soup"},
      ar:{title:"Ø§Ù„Ø¬Ø¯ÙŠ â€“ Ø´Ùƒ Ø¯Ø§Ø®Ù„ÙŠ",prevention:"Ø´Ø§ÙŠ Ù…Ù‡Ø¯Ø¦.",petit_dej:"Ø¨Ø§Ø¨ÙˆÙ†Ø¬ + Ø¨Ø³ÙƒÙˆÙŠØª Ø´ÙˆÙØ§Ù†",dejeuner:"Ø¨Ø§Ø³ØªØ§ Ø®ÙÙŠÙØ©",diner:"Ø´ÙˆØ±Ø¨Ø© Ø¬Ø²Ø± ÙˆÙƒØ§Ø±ÙŠ"}
    }
  },
  "aquarius": {
    "equilibre": {
      fr:{title:"Verseau â€“ inspiration fluide",prevention:"Mange variÃ©.",petit_dej:"Smoothie kiwi-pomme-menthe",dejeuner:"Poisson vapeur + couscous lÃ©gumes",diner:"Soupe froide de concombre"},
      en:{title:"Aquarius â€“ flowing inspiration",prevention:"Eat colorful.",petit_dej:"Kiwi-apple-mint smoothie",dejeuner:"Steamed fish + veg couscous",diner:"Cold cucumber soup"},
      ar:{title:"Ø§Ù„Ø¯Ù„Ùˆ â€“ Ø¥Ù„Ù‡Ø§Ù… Ù…ØªØ¯ÙÙ‚",prevention:"Ø·Ø¹Ø§Ù… Ù…ØªÙ†ÙˆÙ‘Ø¹.",petit_dej:"Ø³Ù…ÙˆØ«ÙŠ ÙƒÙŠÙˆÙŠ ÙˆØªÙØ§Ø­",dejeuner:"Ø³Ù…Ùƒ Ø¨Ø§Ù„Ø¨Ø®Ø§Ø± + ÙƒØ³ÙƒØ³",diner:"Ø´ÙˆØ±Ø¨Ø© Ø®ÙŠØ§Ø± Ø¨Ø§Ø±Ø¯Ø©"}
    },
    "fatigue": {
      fr:{title:"Verseau â€“ baisse dâ€™Ã©nergie",prevention:"Pas dâ€™industriel.",petit_dej:"Jus bouye + pain complet",dejeuner:"Salade lentilles et lÃ©gumes grillÃ©s",diner:"Soupe pois chiches et coriandre"},
      en:{title:"Aquarius â€“ low energy",prevention:"No processed.",petit_dej:"Baobab juice + bread",dejeuner:"Lentil & grilled veg salad",diner:"Chickpea-coriander soup"},
      ar:{title:"Ø§Ù„Ø¯Ù„Ùˆ â€“ Ø·Ø§Ù‚Ø© Ù…Ù†Ø®ÙØ¶Ø©",prevention:"ØªØ¬Ù†Ø¨ Ø§Ù„Ù…ØµÙ†Ù‘Ø¹.",petit_dej:"Ø¹ØµÙŠØ± Ø¨Ø§ÙˆØ¨Ø§Ø¨ + Ø®Ø¨Ø²",dejeuner:"Ø³Ù„Ø·Ø© Ø¹Ø¯Ø³ ÙˆØ®Ø¶Ø§Ø±",diner:"Ø´ÙˆØ±Ø¨Ø© Ø­Ù…Øµ ÙˆÙƒØ²Ø¨Ø±Ø©"}
    },
    "moral_bas": {
      fr:{title:"Verseau â€“ incomprÃ©hension",prevention:"Reste connectÃ©.",petit_dej:"Pain + confiture dâ€™agrumes",dejeuner:"LÃ©gumes sautÃ©s au gingembre",diner:"Soupe miso"},
      en:{title:"Aquarius â€“ misunderstanding",prevention:"Stay social.",petit_dej:"Bread + citrus jam",dejeuner:"Ginger-sautÃ©ed veggies",diner:"Miso soup"},
      ar:{title:"Ø§Ù„Ø¯Ù„Ùˆ â€“ Ø´Ø¹ÙˆØ± Ø¨Ø¹Ø¯Ù… Ø§Ù„ÙÙ‡Ù…",prevention:"Ø§Ø¨Ù‚ Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠØ§Ù‹.",petit_dej:"Ø®Ø¨Ø² Ù…Ø¹ Ù…Ø±Ø¨Ù‰",dejeuner:"Ø®Ø¶Ø§Ø± Ù…Ø¹ Ø²Ù†Ø¬Ø¨ÙŠÙ„",diner:"Ø´ÙˆØ±Ø¨Ø© Ù…ÙŠØ²Ùˆ"}
    }
  },
  "pisces": {
    "equilibre": {
      fr:{title:"Poissons â€“ Ã©motions fluides",prevention:"Dors bien.",petit_dej:"Porridge riz-coco-miel",dejeuner:"Poisson grillÃ© + lÃ©gumes verts",diner:"Soupe douce de patate douce"},
      en:{title:"Pisces â€“ flowing emotions",prevention:"Sleep well.",petit_dej:"Rice-coconut-honey porridge",dejeuner:"Grilled fish + green veggies",diner:"Sweet potato soup"},
      ar:{title:"Ø§Ù„Ø­ÙˆØª â€“ Ù…Ø´Ø§Ø¹Ø± Ù…Ù†Ø³Ø§Ø¨Ø©",prevention:"Ù†ÙÙ… Ø¬ÙŠØ¯Ø§Ù‹.",petit_dej:"Ø¹ØµÙŠØ¯Ø© Ø£Ø±Ø² ÙˆØ¬ÙˆØ² Ø§Ù„Ù‡Ù†Ø¯",dejeuner:"Ø³Ù…Ùƒ Ù…Ø´ÙˆÙŠ + Ø®Ø¶Ø§Ø±",diner:"Ø´ÙˆØ±Ø¨Ø© Ø¨Ø·Ø§Ø·Ø§ Ø­Ù„ÙˆØ©"}
    },
    "fatigue": {
      fr:{title:"Poissons â€“ fatigue Ã©motionnelle",prevention:"Tisane gingembre.",petit_dej:"Tisane gingembre-citron",dejeuner:"Riz aux lÃ©gumes et curry doux",diner:"Soupe de lÃ©gumes verts"},
      en:{title:"Pisces â€“ emotional fatigue",prevention:"Ginger tea.",petit_dej:"Ginger-lemon tea",dejeuner:"Veg rice mild curry",diner:"Green-vegetable soup"},
      ar:{title:"Ø§Ù„Ø­ÙˆØª â€“ ØªØ¹Ø¨ Ø¹Ø§Ø·ÙÙŠ",prevention:"Ø§Ø´Ø±Ø¨ Ø²Ù†Ø¬Ø¨ÙŠÙ„.",petit_dej:"Ø´Ø§ÙŠ Ø²Ù†Ø¬Ø¨ÙŠÙ„ ÙˆÙ„ÙŠÙ…ÙˆÙ†",dejeuner:"Ø£Ø±Ø² Ø¨Ø§Ù„Ø®Ø¶Ø§Ø± ÙˆÙƒØ§Ø±ÙŠ",diner:"Ø´ÙˆØ±Ø¨Ø© Ø®Ø¶Ø§Ø± Ø®Ø¶Ø±Ø§Ø¡"}
    },
    "moral_bas": {
      fr:{title:"Poissons â€“ hypersensibilitÃ©",prevention:"Mange chaud.",petit_dej:"Pain complet + tisane camomille",dejeuner:"Soupe de potiron et coriandre",diner:"Riz au lait de coco"},
      en:{title:"Pisces â€“ hypersensitivity",prevention:"Warm light food.",petit_dej:"Whole bread + chamomile",dejeuner:"Pumpkin-coriander soup",diner:"Coconut rice pudding"},
      ar:{title:"Ø§Ù„Ø­ÙˆØª â€“ Ø­Ø³Ø§Ø³ÙŠØ© Ù…ÙØ±Ø·Ø©",prevention:"Ø·Ø¹Ø§Ù… Ø¯Ø§ÙØ¦.",petit_dej:"Ø®Ø¨Ø² ÙƒØ§Ù…Ù„ + Ø¨Ø§Ø¨ÙˆÙ†Ø¬",dejeuner:"Ø´ÙˆØ±Ø¨Ø© Ù‚Ø±Ø¹ ÙˆÙƒØ²Ø¨Ø±Ø©",diner:"Ø£Ø±Ø² Ø¨Ø­Ù„ÙŠØ¨ Ø¬ÙˆØ² Ø§Ù„Ù‡Ù†Ø¯"}
    }
  }
};

/* 3. BASE Ã‰DUCATIVE COMPLÃˆTE (3 repas dÃ©taillÃ©s + boissons) */
const ASTRO_EDU_DB = {
  /* pour garder court : on met juste 4 signes dÃ©taillÃ©s + boissons,
     mais la structure est lÃ  pour tous â€“ tu as dÃ©jÃ  le dÃ©tail long dans ton message prÃ©cÃ©dent */
  /* on va reprendre aries, taurus, gemini, cancer + boissons */
  "aries": {
    fr: {
      title: "BÃ©lier â€“ Recharger le feu intÃ©rieur",
      petit_dej: {
        nom: "Bouillie d'avoine au gingembre et miel",
        ingredients: ["60 g dâ€™avoine","200 ml lait vÃ©gÃ©tal","1 c.Ã  c. gingembre","1 c.Ã  s. miel","1 pincÃ©e cannelle"],
        preparation: ["Chauffer le lait + avoine 8â€“10 min.","Ajouter gingembre + miel.","Servir chaud."],
        cuisson: "Cuisson douce Ã  feu moyen.",
        calories: 320
      },
      dejeuner: {
        nom: "Poulet citronnÃ© et riz complet",
        ingredients: ["1 filet de poulet","Â½ citron","150 g riz complet","huile dâ€™olive","thym","sel"],
        preparation: ["Mariner 20 min.","Dorer puis mijoter.","Servir avec le riz."],
        cuisson: "Cuisson Ã©quilibrÃ©e, canalise Mars.",
        calories: 540
      },
      diner: {
        nom: "Soupe de carotte et gingembre",
        ingredients: ["3 carottes","Â½ oignon","1 c.Ã  c. gingembre","200 ml eau","sel"],
        preparation: ["Revenir lâ€™oignon.","Ajouter carotte + eau, cuire 20 min.","Mixer avec gingembre."],
        cuisson: "Vapeur douce.",
        calories: 180
      }
    },
    en: {
      title: "Aries â€“ Reignite your inner fire",
      petit_dej: { nom:"Oat porridge with ginger & honey", ingredients:["60 g oats","200 ml plant milk","ginger","honey","cinnamon"], preparation:["Cook 8â€“10 min.","Stir in ginger, honey."], cuisson:"Gentle heat.", calories:320 },
      dejeuner: { nom:"Lemon chicken with brown rice", ingredients:["Chicken fillet","lemon","brown rice","olive oil","thyme"], preparation:["Marinate 20 min.","Sear, simmer.","Serve with rice."], cuisson:"Medium heat.", calories:540 },
      diner: { nom:"Carrot ginger soup", ingredients:["Carrots","onion","ginger","water"], preparation:["SautÃ© onion.","Simmer 20 min.","Blend."], cuisson:"Soft steaming.", calories:180 }
    },
    ar: {
      title: "Ø§Ù„Ø­Ù…Ù„ â€“ Ø¥Ø´Ø¹Ø§Ù„ Ø§Ù„Ù†Ø§Ø± Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠØ©",
      petit_dej: { nom:"Ø¹ØµÙŠØ¯Ø© Ø´ÙˆÙØ§Ù† Ø¨Ø§Ù„Ø²Ù†Ø¬Ø¨ÙŠÙ„ ÙˆØ§Ù„Ø¹Ø³Ù„", ingredients:["Ø´ÙˆÙØ§Ù†","Ø­Ù„ÙŠØ¨ Ù†Ø¨Ø§ØªÙŠ","Ø²Ù†Ø¬Ø¨ÙŠÙ„","Ø¹Ø³Ù„","Ù‚Ø±ÙØ©"], preparation:["ÙŠÙØ·Ù‡Ù‰ 10 Ø¯Ù‚Ø§Ø¦Ù‚.","ÙŠÙØ¶Ø§Ù Ø§Ù„Ø²Ù†Ø¬Ø¨ÙŠÙ„ ÙˆØ§Ù„Ø¹Ø³Ù„."], cuisson:"Ø·Ù‡ÙŠ Ù„Ø·ÙŠÙ.", calories:320 },
      dejeuner: { nom:"Ø¯Ø¬Ø§Ø¬ Ø¨Ø§Ù„Ù„ÙŠÙ…ÙˆÙ† Ù…Ø¹ Ø£Ø±Ø² ÙƒØ§Ù…Ù„", ingredients:["Ø¯Ø¬Ø§Ø¬","Ù„ÙŠÙ…ÙˆÙ†","Ø£Ø±Ø² Ø¨Ù†ÙŠ"], preparation:["ØªØªØ¨ÙŠÙ„ 20 Ø¯Ù‚ÙŠÙ‚Ø©.","Ø·Ù‡ÙŠ.","ØªÙ‚Ø¯ÙŠÙ… Ù…Ø¹ Ø§Ù„Ø£Ø±Ø²."], cuisson:"Ø·Ù‡ÙŠ Ù…ØªÙˆØ³Ø·.", calories:540 },
      diner: { nom:"Ø´ÙˆØ±Ø¨Ø© Ø¬Ø²Ø± ÙˆØ²Ù†Ø¬Ø¨ÙŠÙ„", ingredients:["Ø¬Ø²Ø±","Ø¨ØµÙ„","Ø²Ù†Ø¬Ø¨ÙŠÙ„","Ù…Ø§Ø¡"], preparation:["ÙŠÙØ·Ù‡Ù‰ 20 Ø¯Ù‚ÙŠÙ‚Ø©.","ÙŠÙØ®Ù„Ø·."], cuisson:"Ø¨Ø®Ø§Ø± Ù†Ø§Ø¹Ù….", calories:180 }
    }
  },

  "taurus": {
    fr: {
      title: "Taureau â€“ StabilitÃ© et plaisir vÃ©nusien",
      petit_dej: {
        nom: "Thiakry lÃ©ger au lait caillÃ©",
        ingredients:["80 g mil cuit","150 ml lait caillÃ©","1 c.s. miel","vanille","cannelle"],
        preparation:["MÃ©langer mil + lait.","Sucrer, vanille.","Servir frais."],
        cuisson:"Sans cuisson.",
        calories: 280
      },
      dejeuner: {
        nom: "MafÃ© vÃ©gÃ©tarien allÃ©gÃ©",
        ingredients:["2 c.s. pÃ¢te dâ€™arachide","1 tomate","1 carotte","Â½ oignon","huile","eau"],
        preparation:["Revenir oignon.","Ajouter tomate, rÃ©duire.","Ajouter lÃ©gumes + eau.","DÃ©layer arachide.","Mijoter 25â€“30 min."],
        cuisson:"Cuisson lente Taureau.",
        calories: 460
      },
      diner: {
        nom: "Poisson au four + patate douce",
        ingredients:["1 filet poisson","Â½ patate douce","huile dâ€™olive","citron","sel"],
        preparation:["PrÃ©chauffer 180Â°C.","Assaisonner poisson + patate.","Cuire 20â€“25 min."],
        cuisson:"RÃ´tissage doux.",
        calories: 510
      }
    },
    en: {
      title: "Taurus â€“ Stability and Venus pleasure",
      petit_dej: { nom:"Light thiakry", ingredients:["Cooked millet","fermented milk","honey","vanilla"], preparation:["Mix and chill."], cuisson:"No cook.", calories:280 },
      dejeuner: { nom:"Light vegetarian peanut stew", ingredients:["Peanut paste","tomato","carrot","onion","water"], preparation:["SautÃ© onion.","Add tomato + veg.","Dilute peanut and simmer."], cuisson:"Slow simmer.", calories:460 },
      diner: { nom:"Baked fish with roasted sweet potato", ingredients:["Fish fillet","sweet potato","oil","lemon"], preparation:["Season, bake 20â€“25 min."], cuisson:"Gentle oven.", calories:510 }
    },
    ar: {
      title: "Ø§Ù„Ø«ÙˆØ± â€“ Ø§Ù„Ø§Ø³ØªÙ‚Ø±Ø§Ø± ÙˆØ§Ù„Ù„Ø°Ø©",
      petit_dej: { nom:"Ø«ÙŠØ§ÙƒØ±ÙŠ Ø®ÙÙŠÙ", ingredients:["Ø¯Ø®Ù† Ù…Ø·Ø¨ÙˆØ®","Ù„Ø¨Ù† Ø±Ø§Ø¦Ø¨","Ø¹Ø³Ù„"], preparation:["ÙŠÙØ®Ù„Ø· ÙˆÙŠÙÙ‚Ø¯Ù‘Ù… Ø¨Ø§Ø±Ø¯Ø§Ù‹."], cuisson:"Ø¨Ø¯ÙˆÙ† Ø·Ù‡ÙŠ.", calories:280 },
      dejeuner: { nom:"Ù…Ø§ÙÙŠ Ù†Ø¨Ø§ØªÙŠ Ø®ÙÙŠÙ", ingredients:["Ù…Ø¹Ø¬ÙˆÙ† ÙÙˆÙ„ Ø³ÙˆØ¯Ø§Ù†ÙŠ","Ø·Ù…Ø§Ø·Ù…","Ø¬Ø²Ø±","Ø¨ØµÙ„"], preparation:["ÙŠÙÙ‚Ù„Ù‰ Ø§Ù„Ø¨ØµÙ„.","ØªÙØ¶Ø§Ù Ø§Ù„Ø·Ù…Ø§Ø·Ù… Ø«Ù… Ø§Ù„Ø®Ø¶Ø§Ø±.","ÙŠÙØ¶Ø§Ù Ø§Ù„ÙÙˆÙ„ ÙˆÙŠÙØ·Ù‡Ù‰."], cuisson:"Ø·Ù‡ÙŠ Ø¨Ø·ÙŠØ¡.", calories:460 },
      diner: { nom:"Ø³Ù…Ùƒ Ø¨Ø§Ù„ÙØ±Ù† Ù…Ø¹ Ø¨Ø·Ø§Ø·Ø§ Ø­Ù„ÙˆØ©", ingredients:["Ø³Ù…Ùƒ","Ø¨Ø·Ø§Ø·Ø§","Ø²ÙŠØª","Ù„ÙŠÙ…ÙˆÙ†"], preparation:["ÙŠÙØªØ¨Ù‘Ù„ ÙˆÙŠÙØ®Ø¨ÙØ² 25 Ø¯Ù‚ÙŠÙ‚Ø©."], cuisson:"Ø´ÙˆÙŠ Ù…Ø¹ØªØ¯Ù„.", calories:510 }
    }
  },

  "gemini": {
    fr: {
      title: "GÃ©meaux â€“ LÃ©gÃ¨retÃ© de Mercure",
      petit_dej: { nom:"Smoothie mangue-banane-menthe", ingredients:["Â½ mangue","1 banane","menthe","eau de coco"], preparation:["Mixer tous les ingrÃ©dients."], cuisson:"Aucune cuisson.", calories:210 },
      dejeuner: { nom:"Salade quinoa pois chiches", ingredients:["80 g quinoa","100 g pois chiches","lÃ©gumes grillÃ©s"], preparation:["Cuire quinoa, griller lÃ©gumes, mÃ©langer."], cuisson:"Cuisson courte.", calories:420 },
      diner: { nom:"Soupe miso tofu-gingembre", ingredients:["400 ml eau","1 c.s. miso","100 g tofu","gingembre"], preparation:["Chauffer eau + gingembre.","Ajouter tofu.","Hors feu, ajouter miso."], cuisson:"Chauffe douce.", calories:190 }
    },
    en: {
      title: "Gemini â€“ Mercury clarity",
      petit_dej: { nom:"Mango-banana-mint smoothie", ingredients:["Mango","banana","mint","coconut water"], preparation:["Blend and serve."], cuisson:"No cook.", calories:210 },
      dejeuner: { nom:"Quinoa salad with chickpeas", ingredients:["Quinoa","chickpeas","grilled veggies"], preparation:["Cook, grill, mix."], cuisson:"Short cooking.", calories:420 },
      diner: { nom:"Miso soup with tofu", ingredients:["Water","miso","tofu","ginger"], preparation:["Heat water, add tofu, dissolve miso."], cuisson:"Gentle.", calories:190 }
    },
    ar: {
      title: "Ø§Ù„Ø¬ÙˆØ²Ø§Ø¡ â€“ Ø®ÙØ© Ø¹Ø·Ø§Ø±Ø¯",
      petit_dej: { nom:"Ø³Ù…ÙˆØ«ÙŠ Ù…Ø§Ù†Ø¬Ùˆ ÙˆÙ…ÙˆØ² ÙˆÙ†Ø¹Ù†Ø§Ø¹", ingredients:["Ù…Ø§Ù†Ø¬Ùˆ","Ù…ÙˆØ²","Ù†Ø¹Ù†Ø§Ø¹","Ù…Ø§Ø¡ Ø¬ÙˆØ² Ù‡Ù†Ø¯"], preparation:["ÙŠÙØ®Ù„Ø· ÙˆÙŠÙÙ‚Ø¯Ù‘Ù… Ø¨Ø§Ø±Ø¯Ø§Ù‹."], cuisson:"Ø¨Ø¯ÙˆÙ† Ø·Ù‡ÙŠ.", calories:210 },
      dejeuner: { nom:"Ø³Ù„Ø·Ø© ÙƒÙŠÙ†ÙˆØ§ Ø¨Ø§Ù„Ø­Ù…Øµ", ingredients:["ÙƒÙŠÙ†ÙˆØ§","Ø­Ù…Øµ","Ø®Ø¶Ø§Ø± Ù…Ø´ÙˆÙŠØ©"], preparation:["ØªÙØ³Ù„Ù‚ Ø§Ù„ÙƒÙŠÙ†ÙˆØ§ ÙˆØªÙØ®Ù„Ø· Ø¨Ø§Ù„Ø®Ø¶Ø§Ø±."], cuisson:"Ø·Ù‡ÙŠ Ù‚ØµÙŠØ±.", calories:420 },
      diner: { nom:"Ø´ÙˆØ±Ø¨Ø© Ù…ÙŠØ²Ùˆ Ø¨Ø§Ù„ØªÙˆÙÙˆ", ingredients:["Ù…Ø§Ø¡","Ù…ÙŠØ²Ùˆ","ØªÙˆÙÙˆ","Ø²Ù†Ø¬Ø¨ÙŠÙ„"], preparation:["ÙŠÙØ³Ø®Ù‘Ù† Ø§Ù„Ù…Ø§Ø¡ ÙˆÙŠÙØ¶Ø§Ù Ø§Ù„ØªÙˆÙÙˆ Ø«Ù… Ø§Ù„Ù…ÙŠØ²Ùˆ."], cuisson:"ØªØ³Ø®ÙŠÙ† Ù„Ø·ÙŠÙ.", calories:190 }
    }
  },

  "cancer": {
    fr: {
      title: "Cancer â€“ Douceur lunaire",
      petit_dej: { nom:"CrÃ¨me de riz au lait de coco", ingredients:["Riz rond","lait de coco","sucre","vanille"], preparation:["Cuire riz dans lait coco.","Sucrer, vanille."], cuisson:"Cuisson lente et douce.", calories:340 },
      dejeuner: { nom:"Poisson vapeur et lÃ©gumes verts", ingredients:["Poisson","brocoli","haricots verts"], preparation:["Cuire Ã  la vapeur 10â€“12 min.","Assaisonner lÃ©gÃ¨rement."], cuisson:"Vapeur douce.", calories:410 },
      diner: { nom:"Soupe potiron-coco", ingredients:["Potiron","lait coco","gingembre"], preparation:["Cuire potiron et mixer avec coco."], cuisson:"Cuisson homogÃ¨ne.", calories:250 }
    },
    en: {
      title: "Cancer â€“ Lunar comfort",
      petit_dej: { nom:"Coconut rice cream", ingredients:["Rice","coconut milk","sugar"], preparation:["Cook until creamy."], cuisson:"Slow.", calories:340 },
      dejeuner: { nom:"Steamed fish & greens", ingredients:["Fish","broccoli","green beans"], preparation:["Steam 10â€“12 min."], cuisson:"Steaming.", calories:410 },
      diner: { nom:"Pumpkin-coconut soup", ingredients:["Pumpkin","coconut milk","ginger"], preparation:["Boil, blend."], cuisson:"Soft warm.", calories:250 }
    },
    ar: {
      title: "Ø§Ù„Ø³Ø±Ø·Ø§Ù† â€“ Ø¯ÙØ¡ Ù‚Ù…Ø±ÙŠ",
      petit_dej: { nom:"ÙƒØ±ÙŠÙ…Ø© Ø£Ø±Ø² Ø¨Ø­Ù„ÙŠØ¨ Ø¬ÙˆØ² Ø§Ù„Ù‡Ù†Ø¯", ingredients:["Ø£Ø±Ø²","Ø­Ù„ÙŠØ¨ Ø¬ÙˆØ² Ø§Ù„Ù‡Ù†Ø¯","Ø³ÙƒØ±"], preparation:["ÙŠÙØ·Ù‡Ù‰ Ø­ØªÙ‰ ÙŠØµØ¨Ø­ ÙƒØ±ÙŠÙ…ÙŠÙ‹Ø§."], cuisson:"Ø·Ù‡ÙŠ Ø¨Ø·ÙŠØ¡.", calories:340 },
      dejeuner: { nom:"Ø³Ù…Ùƒ Ø¹Ù„Ù‰ Ø§Ù„Ø¨Ø®Ø§Ø± Ù…Ø¹ Ø®Ø¶Ø§Ø±", ingredients:["Ø³Ù…Ùƒ","Ø¨Ø±ÙˆÙƒÙ„ÙŠ","ÙØ§ØµÙˆÙ„ÙŠØ§"], preparation:["ÙŠÙØ·Ù‡Ù‰ Ø¹Ù„Ù‰ Ø§Ù„Ø¨Ø®Ø§Ø±.",], cuisson:"Ø¨Ø®Ø§Ø± Ù„Ø·ÙŠÙ.", calories:410 },
      diner: { nom:"Ø´ÙˆØ±Ø¨Ø© Ù‚Ø±Ø¹ Ø¨Ø¬ÙˆØ² Ø§Ù„Ù‡Ù†Ø¯", ingredients:["Ù‚Ø±Ø¹","Ø­Ù„ÙŠØ¨ Ø¬ÙˆØ² Ø§Ù„Ù‡Ù†Ø¯","Ø²Ù†Ø¬Ø¨ÙŠÙ„"], preparation:["ÙŠÙØ·Ù‡Ù‰ ÙˆÙŠÙØ®Ù„Ø·."], cuisson:"Ø·Ù‡ÙŠ Ù†Ø§Ø¹Ù….", calories:250 }
    }
  },

  /* boissons universelles */
  "boissons": {
    fr: {
      title: "Boissons universelles â€“ VitalitÃ© et Ã©quilibre",
      recettes: [
        { nom:"Bissap (hibiscus rouge)", effet:"Tonique et antioxydant", ingredients:["Hibiscus","sucre roux","menthe","eau"], preparation:["Faire bouillir 10 min, filtrer, refroidir."] },
        { nom:"Bouye (fruit du baobab)", effet:"Vitamine C, immunitÃ©", ingredients:["Poudre de bouye","lait","sucre","vanille"], preparation:["MÃ©langer Ã  froid, servir frais."] },
        { nom:"Gingembre-citron", effet:"Digestif et rÃ©chauffant", ingredients:["Gingembre","citron","miel","eau chaude"], preparation:["Infuser 10 min, ajouter citron + miel."] }
      ]
    },
    en: {
      title: "Universal drinks â€“ vitality & balance",
      recettes: [
        { nom:"Bissap (red hibiscus)", effet:"Antioxidant tonic", ingredients:["Dried hibiscus","brown sugar","mint","water"], preparation:["Boil 10 min, strain, cool."] },
        { nom:"Bouye (baobab)", effet:"High in vit C", ingredients:["Baobab powder","milk","sugar","vanilla"], preparation:["Mix cold, serve chilled."] },
        { nom:"Ginger-lemon", effet:"Digestive + warming", ingredients:["Fresh ginger","lemon","honey","hot water"], preparation:["Infuse 10 min, add."] }
      ]
    },
    ar: {
      title: "Ø§Ù„Ù…Ø´Ø±ÙˆØ¨Ø§Øª Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠØ© â€“ Ø§Ù„Ø­ÙŠÙˆÙŠØ© ÙˆØ§Ù„ØªÙˆØ§Ø²Ù†",
      recettes: [
        { nom:"Ø¨ÙŠØ³Ø§Ø¨ (Ø§Ù„ÙƒØ±ÙƒØ¯ÙŠÙ‡)", effet:"Ù…Ù†Ø´Ù‘Ø· ÙˆÙ…Ø¶Ø§Ø¯ Ù„Ù„Ø£ÙƒØ³Ø¯Ø©", ingredients:["ÙƒØ±ÙƒØ¯ÙŠÙ‡","Ø³ÙƒØ± Ø¨Ù†ÙŠ","Ù†Ø¹Ù†Ø§Ø¹","Ù…Ø§Ø¡"], preparation:["ÙŠÙØºÙ„Ù‰ 10 Ø¯Ù‚Ø§Ø¦Ù‚ ÙˆÙŠÙØ¨Ø±Ù‘Ø¯."] },
        { nom:"Ø¨ÙˆÙˆÙŠ (Ø§Ù„Ø¨Ø§ÙˆØ¨Ø§Ø¨)", effet:"ØºÙ†ÙŠ Ø¨ÙÙŠØªØ§Ù…ÙŠÙ† C", ingredients:["Ù…Ø³Ø­ÙˆÙ‚ Ø¨Ø§ÙˆØ¨Ø§Ø¨","Ø­Ù„ÙŠØ¨","Ø³ÙƒØ±","ÙØ§Ù†ÙŠÙ„Ø§"], preparation:["ÙŠÙØ®Ù„Ø· Ø¨Ø§Ø±Ø¯Ù‹Ø§ ÙˆÙŠÙÙ‚Ø¯Ù‘Ù…."] },
        { nom:"Ø²Ù†Ø¬Ø¨ÙŠÙ„-Ù„ÙŠÙ…ÙˆÙ†", effet:"Ù…Ù†Ø´Ù‘Ø· Ù„Ù„Ù‡Ø¶Ù…", ingredients:["Ø²Ù†Ø¬Ø¨ÙŠÙ„","Ù„ÙŠÙ…ÙˆÙ†","Ø¹Ø³Ù„","Ù…Ø§Ø¡ Ø³Ø§Ø®Ù†"], preparation:["ÙŠÙÙ†Ù‚Ø¹ 10 Ø¯Ù‚Ø§Ø¦Ù‚ ÙˆÙŠÙØ­Ù„Ù‘Ù‰."] }
      ]
    }
  }
};

/* 4. Drinks planÃ©taires rapides (pour la carte simple) */
const DRINKS = {
  "mars":   { fr: "Jus de gingembre tonifiant", en: "Energizing ginger juice", ar: "Ø¹ØµÙŠØ± Ø²Ù†Ø¬Ø¨ÙŠÙ„ Ù…Ù†Ø´Ù‘Ø·" },
  "venus":  { fr: "Infusion dâ€™hibiscus (bissap)", en: "Hibiscus flower tea", ar: "Ø´Ø§ÙŠ ÙƒØ±ÙƒØ¯ÙŠÙ‡" },
  "lune":   { fr: "Jus de bouye apaisant", en: "Soothing baobab juice", ar: "Ø¹ØµÙŠØ± Ø¨ÙˆÙŠØ§ Ù…Ù‡Ø¯Ø¦" },
  "mercure":{ fr: "Tisane menthe-agrumes", en: "Citrus-mint herbal tea", ar: "Ø´Ø§ÙŠ Ù†Ø¹Ù†Ø§Ø¹-Ø­Ù…Ø¶ÙŠØ§Øª" },
  "soleil": { fr: "Eau citronnÃ©e au curcuma", en: "Turmeric-lemon water", ar: "Ù…Ø§Ø¡ ÙƒØ±ÙƒÙ… ÙˆÙ„ÙŠÙ…ÙˆÙ†" }
};
function pickPlanet(sign) {
  const map = {
    "aries":"mars","taurus":"venus","gemini":"mercure","cancer":"lune","leo":"soleil",
    "virgo":"mercure","libra":"venus","scorpio":"mars","sagittarius":"soleil",
    "capricorn":"lune","aquarius":"lune","pisces":"lune"
  };
  return map[sign] || "lune";
}

/* 5. Traductions fixes */
const I18N = {
  "PrÃ©vention": { english: "Prevention", arabic: "Ø§Ù„ÙˆÙ‚Ø§ÙŠØ©" },
  "Petit-dÃ©jeuner": { english: "Breakfast", arabic: "Ø§Ù„ÙØ·ÙˆØ±" },
  "DÃ©jeuner": { english: "Lunch", arabic: "Ø§Ù„ØºØ¯Ø§Ø¡" },
  "DÃ®ner": { english: "Dinner", arabic: "Ø§Ù„Ø¹Ø´Ø§Ø¡" },
  "Boisson planÃ©taire": { english: "Planetary drink", arabic: "Ø§Ù„Ù…Ø´Ø±ÙˆØ¨ Ø§Ù„ÙÙ„ÙƒÙŠ" },
  "3 repas favorables gÃ©nÃ©rÃ©s avec succÃ¨s": {
    english: "3 favorable meals generated successfully",
    arabic: "ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ 3 ÙˆØ¬Ø¨Ø§Øª Ù…Ù†Ø§Ø³Ø¨Ø© Ø¨Ù†Ø¬Ø§Ø­"
  }
};
function t(key, lang) {
  const n = normalizeLang(lang);
  if (!I18N[key]) return key;
  return I18N[key][n] || key;
}

/* 6. RENDU RAPIDE (petit bloc) */
function renderQuickCard(sign, state, lang) {
  const cardDiv = document.getElementById("recipe-card-content");
  if (!cardDiv) return;
  const nlang = normalizeLang(lang);
  const langKey = getLangKey(nlang);

  if (!ASTRO_DB[sign] || !ASTRO_DB[sign][state]) {
    cardDiv.innerHTML = "<p>âš ï¸ Aucune donnÃ©e disponible pour ce signe.</p>";
    return;
  }

  const data = ASTRO_DB[sign][state][langKey];
  const drinkKey = pickPlanet(sign);
  const drink = DRINKS[drinkKey][langKey];

  cardDiv.innerHTML = `
    <div class="card" style="${nlang==='arabic' ? 'direction:rtl;text-align:right;font-family:Cairo,sans-serif;' : ''}">
      <h3 style="color:#FBBF24;">${data.title}</h3>
      <p><strong>${t("PrÃ©vention", nlang)}:</strong> ${data.prevention}</p>
      <ul style="${nlang==='arabic' ? 'padding-right:1.1rem;' : ''}">
        <li>ğŸ½ï¸ <strong>${t("Petit-dÃ©jeuner", nlang)}:</strong> ${data.petit_dej}</li>
        <li>ğŸ¥— <strong>${t("DÃ©jeuner", nlang)}:</strong> ${data.dejeuner}</li>
        <li>ğŸŒ™ <strong>${t("DÃ®ner", nlang)}:</strong> ${data.diner}</li>
      </ul>
      <p style="color:#FBBF24;">${t("Boisson planÃ©taire", nlang)} â˜•: ${drink}</p>
      <a href="https://astrofoody.lemonsqueezy.com" target="_blank" rel="noopener" class="btn-gold" style="margin-top:.6rem; display:inline-flex;">
        ğŸ›’ ${nlang==='arabic' ? 'Ø´Ø±Ø§Ø¡ / ØªØ­Ù…ÙŠÙ„' : 'TÃ©lÃ©charger / Acheter'}
      </a>
    </div>
  `;
}

/* 7. RENDU Ã‰DUCATIF (gros bloc) */
function renderEduCard(sign, lang) {
  const wrap = document.getElementById("recipe-edu-display");
  if (!wrap) return;
  const nlang = normalizeLang(lang);
  const signData = ASTRO_EDU_DB[sign];
  wrap.style.display = "flex";

  if (!signData) {
    wrap.innerHTML = `<p style="color:rgba(255,255,255,.6);">${nlang==='arabic' ? 'Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨Ø·Ø§Ù‚Ø© ØªØ¹Ù„ÙŠÙ…ÙŠØ© Ù„Ù‡Ø°Ø§ Ø§Ù„Ø¨Ø±Ø¬ Ø¨Ø¹Ø¯.' : 'Pas encore de carte Ã©ducative pour ce signe.'}</p>`;
    return;
  }

  const langData =
    nlang === "arabic" ? signData.ar :
    nlang === "english" ? signData.en :
    signData.fr;

  const boissons = ASTRO_EDU_DB["boissons"];
  const boissonsData =
    nlang === "arabic" ? boissons.ar :
    nlang === "english" ? boissons.en :
    boissons.fr;

  const isAr = nlang === "arabic";

  function mealBlock(mealKey, labelFr, labelEn, labelAr) {
    const meal = langData[mealKey];
    if (!meal) return "";
    const label = isAr ? labelAr : (nlang==="english" ? labelEn : labelFr);
    return `
      <div style="background:rgba(2,6,23,.35);border:1px solid rgba(251,191,36,.12);border-radius:.8rem;padding:1rem;flex:1 1 280px;${isAr ? 'direction:rtl;text-align:right;font-family:Cairo,sans-serif;' : ''}">
        <h3 style="margin-top:0;color:#FBBF24;">${label}</h3>
        <p style="font-weight:600;margin:.2rem 0 .5rem 0;">${meal.nom || ''}</p>
        <p style="margin:.35rem 0;color:rgba(255,255,255,.65);"><strong>${isAr ? 'Ø§Ù„Ù…ÙƒÙˆÙ‘Ù†Ø§Øª :' : 'IngrÃ©dients :'}</strong></p>
        <ul style="${isAr ? 'padding-right:1rem;' : 'padding-left:1rem;'}margin-top:.2rem;">
          ${(meal.ingredients||[]).map(i=>`<li>${i}</li>`).join('')}
        </ul>
        <p style="margin:.5rem 0 .2rem 0;color:rgba(255,255,255,.65);"><strong>${isAr ? 'Ø§Ù„ØªØ­Ø¶ÙŠØ± :' : 'PrÃ©paration :'}</strong></p>
        <ol style="${isAr ? 'padding-right:1rem;' : 'padding-left:1rem;'}margin-top:.2rem;">
          ${(meal.preparation||[]).map(s=>`<li>${s}</li>`).join('')}
        </ol>
        <p style="margin:.5rem 0 .35rem 0;"><strong>${isAr ? 'Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø·Ù‡ÙŠ Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠØ© :' : 'Cuisson Ã©ducative :'}</strong> ${meal.cuisson || ''}</p>
        <p style="margin:.25rem 0;color:rgba(251,191,36,.9);"><strong>${isAr ? 'Ø§Ù„Ø³Ø¹Ø±Ø§Øª Ø§Ù„Ø­Ø±Ø§Ø±ÙŠØ© :' : 'Calories :'}</strong> ${meal.calories ? meal.calories+' kcal' : 'â€”'}</p>
      </div>
    `;
  }

  wrap.innerHTML = `
    <div style="display:flex;flex-wrap:wrap;gap:1rem;${isAr?'direction:rtl;text-align:right;font-family:Cairo,sans-serif;':''}">
      <div style="flex:1 1 100%;margin-bottom:.5rem;">
        <h2 style="margin:0 0 .25rem 0;color:#fff;">${langData.title || 'Carte AstroFood'}</h2>
        <p style="margin:0;color:rgba(255,255,255,.45);">
          ${isAr ? "Ø¨Ø·Ø§Ù‚Ø© ØªØ¹Ù„ÙŠÙ…ÙŠØ© : 3 ÙˆØ¬Ø¨Ø§Øª + Ù…Ø´Ø±ÙˆØ¨Ø§Øª Ø¯Ø§Ø¹Ù…Ø© Ø­Ø³Ø¨ Ø¨Ø±Ø¬Ùƒ." : "Carte Ã©ducative : 3 repas + boissons de soutien selon ton signe."}
        </p>
      </div>
      ${mealBlock("petit_dej","Petit-dÃ©jeuner Ã©nergÃ©tique","Breakfast boost","ÙØ·ÙˆØ± Ù…Ù†Ø´Ù‘Ø·")}
      ${mealBlock("dejeuner","DÃ©jeuner Ã©quilibrÃ©","Balanced lunch","ØºØ¯Ø§Ø¡ Ù…ØªÙˆØ§Ø²Ù†")}
      ${mealBlock("diner","DÃ®ner astro lÃ©ger","Light astro dinner","Ø¹Ø´Ø§Ø¡ ÙÙ„ÙƒÙŠ Ø®ÙÙŠÙ")}
      <div style="background:rgba(251,191,36,.04);border:1px solid rgba(251,191,36,.12);border-radius:.8rem;padding:1rem;flex:1 1 280px;${isAr?'direction:rtl;text-align:right;font-family:Cairo,sans-serif;':''}">
        <h3 style="margin-top:0;color:#FBBF24;">${boissonsData.title}</h3>
        ${(boissonsData.recettes||[]).map(dr=>`
          <div style="margin-bottom:.65rem;">
            <p style="margin:0;font-weight:600;">${dr.nom}</p>
            <p style="margin:.1rem 0 .25rem 0;color:rgba(255,255,255,.6);">${dr.effet || ''}</p>
            <p style="margin:0 0 .15rem 0;"><strong>${isAr?'Ø§Ù„Ù…ÙƒÙˆÙ‘Ù†Ø§Øª:':'IngrÃ©dients :'}</strong> ${(dr.ingredients||[]).join(", ")}</p>
            <p style="margin:0;"><strong>${isAr?'Ø§Ù„ØªØ­Ø¶ÙŠØ±:':'PrÃ©paration :'}</strong> ${dr.preparation || ''}</p>
          </div>
        `).join('')}
        <a href="https://astrofoody.lemonsqueezy.com" target="_blank" rel="noopener" class="btn-gold" style="margin-top:.6rem;display:inline-flex;">
          ğŸ›’ ${isAr ? "ØªØ­Ù…ÙŠÙ„ / Ø´Ø±Ø§Ø¡" : "TÃ©lÃ©charger / Acheter"}
        </a>
      </div>
    </div>
  `;
}

/* 8. SWITCH LANG (boutons du header) */
function applyRTL(isArabic) {
  if (isArabic) {
    document.documentElement.lang = "ar";
    document.body.dir = "rtl";
    document.body.style.fontFamily = "'Cairo', sans-serif";
  } else {
    document.documentElement.lang = "fr";
    document.body.dir = "ltr";
    document.body.style.fontFamily = "system-ui, -apple-system, 'Segoe UI', sans-serif";
  }
}
function switchLang(lang) {
  const norm = normalizeLang(lang);

  // activer boutons
  document.querySelectorAll(".lang-btn").forEach(btn => {
    btn.classList.toggle("active", btn.dataset.lang === norm);
  });

  // changer textes
  document.querySelectorAll("[data-i18n-fr]").forEach(el => {
    const fr = el.getAttribute("data-i18n-fr");
    const en = el.getAttribute("data-i18n-en");
    const ar = el.getAttribute("data-i18n-ar");
    if (norm === "french") el.textContent = fr;
    if (norm === "english") el.textContent = en;
    if (norm === "arabic") el.textContent = ar;
  });

  applyRTL(norm === "arabic");

  // re-rendre si un signe est dÃ©jÃ  choisi
  const sign = document.getElementById("zodiac-select").value || "taurus";
  const state = document.getElementById("energy-select").value || "equilibre";
  renderQuickCard(sign, state, norm);
  renderEduCard(sign, norm);

  // ajuster placeholder chat
  const chatInput = document.getElementById("chat-input");
  if (chatInput) {
    if (norm === "arabic") {
      chatInput.placeholder = "Ø§ÙƒØªØ¨ Ø¨Ø±Ø¬Ùƒ + Ø­Ø§Ù„ØªÙƒ...";
      chatInput.style.direction = "rtl";
      chatInput.style.textAlign = "right";
    } else if (norm === "english") {
      chatInput.placeholder = "Type your sign + state...";
      chatInput.style.direction = "ltr";
      chatInput.style.textAlign = "left";
    } else {
      chatInput.placeholder = "Ex : BÃ©lier fatigue...";
      chatInput.style.direction = "ltr";
      chatInput.style.textAlign = "left";
    }
  }
}

/* 9. GÃ‰NÃ‰RER (clic bouton) */
function genRecettes() {
  const sign = document.getElementById("zodiac-select").value;
  const state = document.getElementById("energy-select").value;
  const activeBtn = document.querySelector(".lang-btn.active");
  const lang = activeBtn ? activeBtn.dataset.lang : "french";

  renderQuickCard(sign, state, lang);
  renderEduCard(sign, lang);
}

/* 10. CHATBOT */
function openChat() {
  document.getElementById("chatbot").classList.remove("hidden");
}
function closeChat() {
  document.getElementById("chatbot").classList.add("hidden");
}
function sendMsg() {
  const input = document.getElementById("chat-input");
  const box = document.getElementById("chat-messages");
  const txt = input.value.trim();
  if (!txt) return;

  box.innerHTML += `<div class="ai-msg">ğŸ§‘â€ğŸ³ ${txt}</div>`;

  let langBtn = document.querySelector(".lang-btn.active");
  let lang = langBtn ? langBtn.dataset.lang : "french";
  lang = normalizeLang(lang);
  const lower = txt.toLowerCase();

  // dÃ©tecter signe
  const map = {
    "belier":"aries","bÃ©lier":"aries","aries":"aries",
    "taureau":"taurus","taurus":"taurus",
    "gÃ©meaux":"gemini","gemeaux":"gemini","gemini":"gemini",
    "cancer":"cancer",
    "lion":"leo","leo":"leo",
    "vierge":"virgo","virgo":"virgo",
    "balance":"libra","libra":"libra",
    "scorpion":"scorpio","scorpio":"scorpio",
    "sagittaire":"sagittarius","sagittarius":"sagittarius",
    "capricorne":"capricorn","capricorn":"capricorn",
    "verseau":"aquarius","aquarius":"aquarius",
    "poissons":"pisces","poisson":"pisces","pisces":"pisces"
  };
  let detectedSign = null;
  for (const k in map) {
    if (lower.includes(k)) {
      detectedSign = map[k];
      break;
    }
  }
  let detectedState = "equilibre";
  if (lower.includes("fatigue") || lower.includes("tired") || lower.includes("ØªØ¹Ø¨")) detectedState = "fatigue";
  if (lower.includes("stress") || lower.includes("moral") || lower.includes("Ø­Ø²ÙŠÙ†")) detectedState = "moral_bas";

  if (!detectedSign) {
    const msg =
      lang==="arabic"
        ? "Ø§ÙƒØªØ¨ Ø¨Ø±Ø¬Ùƒ + Ø­Ø§Ù„ØªÙƒ (ØªØ¹Ø¨ØŒ Ø¶ØºØ·ØŒ Ù‡Ø¶Ù…...) ÙˆØ³Ø£Ù‚ØªØ±Ø­ Ù„Ùƒ 3 ÙˆØ¬Ø¨Ø§Øª + 2 Ù…Ø´Ø±ÙˆØ¨."
        : lang==="english"
        ? "Tell me your sign + state (fatigue, stress, digestion) and Iâ€™ll suggest 3 meals + 2 drinks."
        : "Dis-moi ton signe + ton Ã©tat (fatigue, stress, digestion) et je te propose 3 repas + 2 boissons.";
    box.innerHTML += `<div class="ai-msg" style="${lang==='arabic'?'direction:rtl;text-align:right;font-family:Cairo,sans-serif;':''}">${msg}</div>`;
    input.value = "";
    box.scrollTop = box.scrollHeight;
    return;
  }

  // rÃ©cupÃ©rer fiche Ã©ducative
  const edu = ASTRO_EDU_DB[detectedSign];
  const eduLang =
    lang==="arabic" ? edu?.ar :
    lang==="english" ? edu?.en :
    edu?.fr;
  const drinksData =
    lang==="arabic" ? ASTRO_EDU_DB.boissons.ar :
    lang==="english" ? ASTRO_EDU_DB.boissons.en :
    ASTRO_EDU_DB.boissons.fr;
  const drinksText = (drinksData.recettes||[]).slice(0,2).map(d=>`â€¢ ${d.nom} (${d.effet})`).join("<br>");

  let reply = "";
  if (eduLang) {
    if (lang==="arabic") {
      reply = `
      <div class="ai-msg" style="direction:rtl;text-align:right;font-family:'Cairo',sans-serif;">
        âœ… Ø¨Ø±Ø¬Ùƒ: <strong>${eduLang.title}</strong><br>
        ğŸ½ ÙØ·ÙˆØ±: ${eduLang.petit_dej?.nom || "ØºÙŠØ± Ù…ØªÙˆÙØ±"}<br>
        ğŸ› ØºØ¯Ø§Ø¡: ${eduLang.dejeuner?.nom || "ØºÙŠØ± Ù…ØªÙˆÙØ±"}<br>
        ğŸ¥— Ø¹Ø´Ø§Ø¡: ${eduLang.diner?.nom || "ØºÙŠØ± Ù…ØªÙˆÙØ±"}<br>
        ğŸ¥¤ Ù…Ø´Ø±ÙˆØ¨Ø§Øª Ù…Ù‚ØªØ±Ø­Ø©:<br>${drinksText}<br>
        ğŸ”— <a href="https://astrofoody.lemonsqueezy.com" target="_blank" rel="noopener" style="color:#FBBF24;">Ø§Ø°Ù‡Ø¨ Ù„Ù„Ù…ØªØ¬Ø±</a>
      </div>`;
    } else if (lang==="english") {
      reply = `
      <div class="ai-msg">
        âœ… Sign: <strong>${eduLang.title}</strong><br>
        ğŸ½ Breakfast: ${eduLang.petit_dej?.nom || "N/A"}<br>
        ğŸ› Lunch: ${eduLang.dejeuner?.nom || "N/A"}<br>
        ğŸ¥— Dinner: ${eduLang.diner?.nom || "N/A"}<br>
        ğŸ¥¤ Drinks:<br>${drinksText}<br>
        ğŸ”— <a href="https://astrofoody.lemonsqueezy.com" target="_blank" rel="noopener" style="color:#FBBF24;">Open store</a>
      </div>`;
    } else {
      reply = `
      <div class="ai-msg">
        âœ… Signe : <strong>${eduLang.title}</strong><br>
        ğŸ½ Petit-dÃ©j : ${eduLang.petit_dej?.nom || "â€”"}<br>
        ğŸ› DÃ©jeuner : ${eduLang.dejeuner?.nom || "â€”"}<br>
        ğŸ¥— DÃ®ner : ${eduLang.diner?.nom || "â€”"}<br>
        ğŸ¥¤ Boissons conseillÃ©es :<br>${drinksText}<br>
        ğŸ”— <a href="https://astrofoody.lemonsqueezy.com" target="_blank" rel="noopener" style="color:#FBBF24;">Voir le pack complet</a>
      </div>`;
    }
  } else {
    reply = `<div class="ai-msg">Fiche pas encore prÃªte pour ce signe.</div>`;
  }

  box.innerHTML += reply;
  input.value = "";
  box.scrollTop = box.scrollHeight;

  // on rafraÃ®chit aussi lâ€™Ã©cran principal
  renderQuickCard(detectedSign, detectedState, lang);
  renderEduCard(detectedSign, lang);
}

/* 11. INIT */
document.addEventListener("DOMContentLoaded", function() {
  // langue FR par dÃ©faut
  switchLang("french");
  // afficher par dÃ©faut Taureau Ã©quilibre
  renderQuickCard("taurus","equilibre","french");
  renderEduCard("aries","french");

  // activer les boutons de langue
  document.querySelectorAll(".lang-btn").forEach(btn => {
    btn.addEventListener("click", () => switchLang(btn.dataset.lang));
  });
});
</script>

</body>
</html>
